var qt=Object.defineProperty;var Qt=(e,t,o)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var R=(e,t,o)=>(Qt(e,typeof t!="symbol"?t+"":t,o),o);import{Y as Jt,Z as jt,_ as eo,d as z,M as kt,N as tt,$ as to,a0 as oo,f as Oe,j as ro,o as _e,u as ao,c as Ie,i as Ge,D as ze,E as xt,H as it,r as Ut,m as no,k as so,a1 as io,a2 as co,a3 as lo,a4 as uo}from"./vendors-vue-framework-13104596.js";import{l as S,m as U,al as ee,c as De,Q as te,b0 as po,b1 as d,b2 as V,b3 as mo,b4 as O,ac as go,b5 as wo,b6 as fo,b7 as de,b8 as pe,b9 as Mt,ba as Eo,x as ho,bb as To,bc as le,bd as _o,be as Io,bf as So,bg as Ao,bh as yo,bi as Be,bj as Ro,bk as Xe,bl as vo,bm as Co,e as ct,bn as Lo,bo as Oo,bp as Do,bq as bo,br as No,bs as Po,bt as ko,bu as xo,bv as Uo,bw as Mo,bx as Fo,by as Ho,bz as Go,bA as Bo,bB as Vo,bC as $o,bD as Wo,bE as Yo,bF as Ko,bG as lt,bH as ut,bI as zo,bJ as Xo,bK as Zo,bL as qo,bM as Qo,au as K,bN as dt,at as X,bO as re,bP as Jo,bQ as Ve,a0 as me,S as ge,bR as jo,bS as we,bT as er,C as tr,bU as $e,bV as pt,bW as mt,bX as We,bY as or,bZ as rr,g as ot,b_ as ar,b$ as nr,c0 as ue,c1 as sr,c2 as Ze,c3 as fe,d as ir,c4 as cr,c5 as lr,c6 as ur,c7 as dr,c8 as pr}from"./commons-store-f390809e.js";import{_ as D}from"./braze-89d377b3.js";import{i as Y,c as mr,m as Ae,w as gr,x as wr}from"./vendors-59c98b73.js";import{z as fr,J as Er,K as hr,M as Tr,N as _r,O as Ir,D as Sr}from"./vendors-framework-155f2588.js";import{W as Ar,i as gt,D as qe,b as yr,V as Rr,E as vr,d as Cr,N as Lr}from"./getyourguide-framework-9ee7e61a.js";import{c as Ft,i as Or,w as Dr,a as br}from"./vendors-sentry-d2dc44b0.js";import{_ as Ue}from"./getyourguide-compass-3bc10143.js";import"./locales.en-1fc747e9.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();const Nr=()=>({errors:[],facebookData:{},hasRequestedLoginAction:!1,isLoading:!1,isLoggedIn:!1,customer:{id:null,displayName:"",firstName:void 0,lastName:void 0},providerData:{oldEmail:void 0,providers:void 0,email:void 0,error:void 0},revalidateSession:!1,isSocialLogin:!1}),Pr={firstName:e=>e.customer.firstName,customerId:e=>e.customer.id,isLoggedIn:e=>e.isLoggedIn,getProviderData:e=>e.providerData},I={ADD_ERROR:"ADD_ERROR",ADD_FACEBOOK_DATA:"ADD_FACEBOOK_DATA",CLEAN_ERRORS:"CLEAN_ERRORS",SET_LOADING_STATE:"SET_LOADING_STATE",SET_LOGIN_TENTATIVE:"SET_LOGIN_TENTATIVE",SET_IS_LOGGED_IN:"SET_IS_LOGGED_IN",SET_IS_LOGGED_OUT:"SET_IS_LOGGED_OUT",SET_IS_SOCIAL_LOGIN:"SET_IS_SOCIAL_LOGIN",SET_CUSTOMER_INFO:"SET_CUSTOMER_INFO",SET_PROVIDER_DATA:"SET_PROVIDER_DATA",SET_REVALIDATE_SESSION:"SET_REVALIDATE_SESSION"},kr=(e="")=>e.replace(/\+/g," "),J=e=>(e||"").split(/ (.+)/).map(t=>kr(t)),xr={[I.SET_LOADING_STATE](e,t){e.isLoading=!!t},[I.SET_LOGIN_TENTATIVE](e,t=!0){e.hasRequestedLoginAction=!!t},[I.SET_IS_LOGGED_IN](e){e.isLoggedIn=!0},[I.SET_REVALIDATE_SESSION](e,t=!1){e.revalidateSession=t},[I.SET_IS_LOGGED_OUT](e){e.isLoggedIn=!1},[I.SET_IS_SOCIAL_LOGIN](e,t=!1){e.isSocialLogin=t},[I.ADD_ERROR](e,t){e.errors.push(t)},[I.ADD_FACEBOOK_DATA](e,t){e.facebookData=t},[I.CLEAN_ERRORS](e){e.errors.splice(0,e.errors.length)},[I.SET_CUSTOMER_INFO](e,{id:t,displayName:o,firstName:r,lastName:a}){e.customer.id=t,e.customer.displayName=o,r||([r,a]=J(o)),e.customer.firstName=r,e.customer.lastName=a},[I.SET_PROVIDER_DATA](e,t){e.providerData=t}};function Z(e){return Object.assign({},...Object.entries(e).map(([t,o])=>({[o]:t})))}const Ur=new RegExp(/^(http|https):\/\/(www\.)?getyourguide\.(com|co\.uk|dk|de|at|ch|es|com\.tw|com\.mx|fi|fr|it|jp|co\.kr|nl|no|pl|com\.br|pt|ru|se|com\.tr)(\/.*)?$/),Mr=new RegExp(/^(http|https):\/\/.*\.(testing[0-9][0-9]?\.gygtest)\.com(\/.*)?$/),Fr=e=>Ur.test(e)||Mr.test(e),Ht="one_tap_login_disabled",Hr=1e3,Gr=e=>new Promise(t=>setTimeout(t,e)),Br=async(e,t)=>{if(localStorage&&localStorage.getItem(Ht)==="true")return;await Gr(typeof t=="number"?t:Hr),e()},Vr=()=>{localStorage&&localStorage.setItem(Ht,"true")},$r=()=>{Vr()},Wr=e=>{try{return typeof e.google.accounts.id.initialize<"u"}catch{return!1}},Yr=(e,t,o)=>{e.isDisplayed()&&wt(t,"show","display-google-one-tap",o),e.getSkippedReason()==="user_cancel"&&wt(t,"click","close-google-one-tap",o)},wt=(e,t,o,r)=>{const a={action:t,id:"google-one-tap",target:o,container_name:r};a.action==="show"?e.logTravelerUIShow(a.id):e.logTravelerUIClick(a.id)},Kr="C0004";function ft(){return window?.OnetrustActiveGroups?.includes(Kr)}async function zr(){return ft()?!0:new Promise(e=>{window.addEventListener("OneTrustGroupsUpdated",()=>{ft()&&e(!0)})})}async function Gt(){return await zr(),D(()=>import("./braze-sdk-04a950a5.js"),["assets/braze-sdk-04a950a5.js","assets/braze-89d377b3.js"])}let Bt=()=>{};const Xr=new Promise(e=>Bt=e);async function uc(e){const t=await Gt();t.initialize("32b57c7b-1181-4973-9f07-79cdd6d2c403",{baseUrl:"https://sdk.fra-01.braze.eu/",minimumIntervalBetweenTriggerActionsInSeconds:5,allowUserSuppliedJavascript:!0,enableLogging:!1,doNotLoadFontAwesome:!0,contentSecurityNonce:e}),window?.e2eTest||t.automaticallyShowInAppMessages(),t.openSession(),Bt()}async function dc(e,t={}){const o=await Se();o.logCustomEvent(e,t),o.requestImmediateDataFlush()}async function Zr(e){const t=await Se();t.changeUser(e),t.requestImmediateDataFlush()}async function pc(e,t){const o=await Se();o.getUser()?.setCustomUserAttribute(e,t),o.requestImmediateDataFlush()}async function mc(e,t){const o=await Se();o.getUser()?.addAlias(e,t),o.requestImmediateDataFlush()}async function gc(e){const t=await Se();t.getUser()?.setLanguage(e),t.requestImmediateDataFlush()}async function Se(){return await Xr,await Gt()}const qr=async e=>{try{e?(await Zr(`${e}`),Qr("customer_id",e)):(S.info("Braze changeUser failed: no customerId"),U.increment("braze.main.changeUserMissingCustomerId"))}catch(t){const o=t?.name??"unknown-type";U.increment("braze.main.changeUserFailed",{reason:o}),S.error({message:"Braze user could not be changed",error:t})}},Qr=(e,t)=>{window?.localStorage?.setItem?.(`appboy_${e}`,JSON.stringify(t))},wc=e=>window?.localStorage?.getItem(`appboy_${e}`)??"",Jr=/^\/(.*(https?|javascript):|[^/?]*\.[^/]*\/|[^/]*\.(com|pw)$)/i,jr=/[&?]next=(.+)/;function Vt(e=""){if(!e||e[0]!=="/"||["/",".","\\","%","<",">"].includes(e[1])||Jr.test(e))return!1;const t=jr.exec(e);return t?Vt(t[1]):!0}const L={emailAlreadyInUse:"emailAlreadyInUse",noEmailInUserCredential:"noEmailInUserCredential",passwordCreationFailed:"passwordCreationFailed",facebookAccountExists:"facebookAccountExists",facebookEmailExists:"facebookEmailExists",facebookGoogleExists:"facebookGoogleExists",facebookUnknownError:"facebookUnknownError",appleUnknownError:"appleUnknownError",googleUnknownError:"googleUnknownError",invalidEmail:"invalidEmail",tooManyRequests:"tooManyRequests",unknownError:"unknownError",userNotFound:"userNotFound",wrongPassword:"wrongPassword",sendEmailLinkLoginFailed:"sendEmailLinkLoginFailed",expiredActionCode:"invalidActionCode"},F={[L.emailAlreadyInUse]:"auth/email-already-in-use",[L.facebookAccountExists]:"auth/account-exists-with-different-credential",[L.invalidEmail]:"auth/invalid-email",[L.tooManyRequests]:"auth/too-many-requests",[L.userNotFound]:"auth/user-not-found",[L.wrongPassword]:"auth/wrong-password",[L.noEmailInUserCredential]:"noEmailInUserCredential",[L.expiredActionCode]:"auth/expired-action-code"},q=Object.values(F),h=e=>{const t=Object.entries(e).reduce((o,[r,a])=>a?{...o,[r]:a}:o,{});U.increment("authentication",t)},A=(e,t)=>{if(t.type==="error")if(typeof e=="object"){if(t.service==="fishfarm-api"&&t.action==="logout")try{S.error("[Authentication] FishfarmAPI logout error",{error:{message:JSON.stringify(e)}})}catch{S.error("[Authentication] FishfarmAPI failed to stringify error")}S.error(e,`[Authentication] ${t.service} - ${t.action} - ${t.type}`)}else S.error(`[Authentication] ${t.service} - ${t.action} - ${t.type}`,{error:{message:e}})},ea=e=>e.indexOf("/account/")>-1,M=async({firebaseConfiguration:e,locale:t})=>{const{default:o}=await D(()=>import("./vendors-firebase-57a887ed.js").then(a=>a.i),["assets/vendors-firebase-57a887ed.js","assets/braze-89d377b3.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js"]);await o(e,t);const{auth:r}=(await D(()=>import("./vendors-firebase-57a887ed.js").then(a=>a.a),["assets/vendors-firebase-57a887ed.js","assets/braze-89d377b3.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js"])).default;return r},ye=async e=>{const t=await M({firebaseConfiguration:e.context.firebaseConfiguration,locale:e.context.locale}),o=t().currentUser;(o?.providerData||[]).forEach(a=>{const n=new t.EmailAuthProvider().providerId;a?.providerId===n&&o?.unlink(n).then(()=>S.info("[EmailAuthProvider Unlinking] Provider unlinked because user logged in with social media"),s=>S.error(`[EmailAuthProvider Unlinking] Error unlinking Email/Password: ${s}`))})},ae=async(e,t)=>{const o="error",r="firebase";try{const a=await e.user?.getIdTokenResult(),n=a?.claims.gygCustomerId,i=a?.claims.firebase.sign_in_provider!=="password";return{id:n,isSocialLogin:i}}catch(a){throw A(a,{action:t,service:r,type:o}),h({action:t,service:r,type:o,code:a?.code}),a}};function ta(e){return{addError({commit:t},o){t(I.ADD_ERROR,o)},cleanErrors({commit:t}){t(I.CLEAN_ERRORS)},reset({commit:t,dispatch:o}){o("cleanErrors"),t(I.SET_LOADING_STATE,!0)},setLoggedContext({commit:t},o){const{customerData:r,revalidateSession:a,isSocialLogin:n}=o,s=r.id;try{s&&(ee().set("customerId",s.toString(),{httpOnly:!0}),qr(s))}catch{}t(I.SET_IS_LOGGED_IN),t(I.SET_CUSTOMER_INFO,r),t(I.SET_LOADING_STATE,!1),t(I.SET_REVALIDATE_SESSION,a),t(I.SET_IS_SOCIAL_LOGIN,n)},setLoginTentative({commit:t}){t(I.SET_LOGIN_TENTATIVE)},afterAuthenticated({commit:t,dispatch:o,rootState:r},{nextUri:a="",refreshAfterAuthentication:n,message:s}){t(I.CLEAN_ERRORS);const i=document.referrer;s==="logout"&&ee().set("disableOneTap","true");const c=l=>l.includes("/404")||l.includes("/login")||l.includes("/signup")||l.includes("/forgot-password")||l.includes("/reset-password"),u=l=>l.startsWith(window.location.origin+"/");if(s&&o("context/setFutureSessionMessage",{message:s},{root:!0}),s==="logout"&&ea(document.location.pathname)){window.location.href=De(r.context?.localePath,"/");return}a&&Fr(a)?window.location.replace(a):u(i)&&!c(i)&&!n?window.location.replace(i):n?window.location.reload():Vt(a||"")&&!c(a)?window.location.replace(a):window.location.href=De(r.context?.localePath,`/${window.location.search}`)},async logout({commit:t,dispatch:o,rootState:r}){o("reset");const a=await M({firebaseConfiguration:r.context.firebaseConfiguration,locale:r.context.locale});try{h({action:"logout",type:"attempt",service:"firebase"});const n=await a().currentUser?.getIdToken();await a().signOut().catch(s=>{h({action:"logout",type:"error",service:"firebase"}),A(s,{action:"logout",type:"error",service:"firebase"})}),await e.logout().catch(s=>{h({action:"logout",type:"error",service:"tfe",code:"tfeLogout"}),A(s,{action:"logout",type:"error",service:"tfe"})}),r.context.allowLoginOnFishfarm&&(ee().expire("customerId"),te(r,po,"B")&&ee().expire("shoppingCartId"),await e.customerLogOut(n).catch(s=>{h({action:"logout",type:"error",service:"fishfarm-api",code:"customerLogOut"}),A(s,{action:"logout",type:"error",service:"fishfarm-api"})})),t(I.SET_IS_LOGGED_OUT),t(I.SET_LOADING_STATE,!1),h({action:d.logout,type:"success",service:""})}catch(n){throw t(I.SET_LOADING_STATE,!1),t(I.ADD_ERROR,L.unknownError),n}},async restoreSession({dispatch:t,rootState:o,state:r}){const{isLoggedIn:a}=r,n=V(t),s=await M({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale});return new Promise((i,c)=>{s()||i();const u=s().onAuthStateChanged(async l=>{const{hasRequestedLoginAction:p}=o.auth;if(!a&&s().currentUser&&!p)return n("notifications/setMessage","loginExpired"),S.error({visitorId:o.context.visitorId},"[Authentication] Session expired"),await t("logout"),u(),i();if(l)try{const g=await l.getIdTokenResult(),m=g.claims?.gygCustomerId,E=l?.displayName,w=g.claims.firebase.sign_in_provider!=="password";m&&E&&t("setLoggedContext",{customerData:{displayName:E,id:m},isSocialLogin:w})}catch(g){h({action:"restoreSession/getIdTokenResult",type:"error",service:"firebase"}),A(g,{action:"restoreSession/getIdTokenResult",type:"error",service:"firebase"})}return u(),i()},l=>(n("notifications/setMessage","loginExpired"),h({action:"restoreSession/onAuthStateChanged",type:"error",service:"firebase"}),A(l,{action:"restoreSession/onAuthStateChanged",type:"error",service:"firebase"}),c))})},async signupWithEmail({commit:t,dispatch:o,rootState:r},{firstName:a,lastName:n,email:s,password:i,getNewsletter:c,softOptInDisplayed:u}){o("reset");try{o("setLoginTentative"),h({action:d.emailPassword,type:"attempt",service:""});const l=await M({firebaseConfiguration:r.context.firebaseConfiguration,locale:r.context.locale}),p=await l().createUserWithEmailAndPassword(s,i).catch(f=>{throw A(f,{action:d.emailPassword,service:"firebase",type:"error"}),h({action:d.emailPassword,service:"firebase",type:"error",code:f?.code}),f}),g=l().currentUser,m=`${a} ${n}`;await g.updateProfile({displayName:m}).catch(f=>{throw A(f,{action:d.emailPassword,service:"firebase",type:"error"}),h({action:d.emailPassword,service:"firebase",type:"error",code:f?.code}),f}),r.context.allowLoginOnFishfarm&&await e.createCustomerFromLogin({actionOrigin:d.emailPassword,customerData:{firstName:a,isSubscribedForNewsletter:c,lastName:n,password:i,locale:r.context.locale},softOptInDisplayed:u}).then(()=>l().currentUser?.getIdToken(!0)).catch(f=>{throw A(f,{action:d.emailPassword,service:"fishfarm-api",type:"error"}),h({action:d.emailPassword,service:"fishfarm-api",type:"error",code:"createCustomerFromLogin"}),f});const E=await p.user?.getIdToken(r.context.allowLoginOnFishfarm).catch(f=>{throw A(f,{action:d.emailPassword,service:"firebase",type:"error"}),h({action:d.emailPassword,service:"firebase",type:"error",code:f?.code}),f});await e.login(E).catch(f=>{throw A(f,{action:d.emailPassword,service:"tfe",type:"error"}),h({action:d.emailPassword,service:"tfe",type:"error",code:"login"}),f});const{id:y,isSocialLogin:w}=await ae(p,d.emailPassword);return o("setLoggedContext",{customerData:{id:y,displayName:m,firstName:a,lastName:n},isSocialLogin:w}),h({action:d.emailPassword,type:"success",service:""}),p.user}catch(l){throw t(I.SET_LOADING_STATE,!1),q.includes(l.code)?(t(I.ADD_ERROR,Z(F)[l.code]),l):(t(I.ADD_ERROR,L.unknownError),l)}},async loginWithEmail({commit:t,dispatch:o,rootState:r},{email:a,facebookData:n,password:s,rememberMe:i,attemptCounter:c=0}){o("reset");const u=await M({firebaseConfiguration:r.context.firebaseConfiguration,locale:r.context.locale});try{const{LOCAL:l,SESSION:p}=u.Auth?.Persistence||{};await u().setPersistence(i?l:p),o("setLoginTentative"),h({action:d.emailPassword,type:"attempt",service:""});const g=await u().signInWithEmailAndPassword(a,s).catch(v=>{throw A(v,{action:d.emailPassword,service:"firebase",type:"error"}),h({action:d.emailPassword,service:"firebase",type:"error",code:v?.code}),v}),m=await g.user?.getIdToken().catch(v=>{throw A(v,{action:d.emailPassword,service:"firebase",type:"error"}),h({action:d.emailPassword,service:"firebase",type:"error",code:v?.code}),v}),E=g.user?.displayName,[y,w]=J(E);r.context.allowLoginOnFishfarm&&await e.createCustomerFromLogin({actionOrigin:d.emailPassword,customerData:{firstName:y,lastName:w,isSubscribedForNewsletter:!1,locale:r.context.locale},softOptInDisplayed:!1}).then(()=>u().currentUser?.getIdToken(!0)).catch(v=>{throw A(v,{action:d.emailPassword,service:"fishfarm-api",type:"error"}),h({action:d.emailPassword,service:"fishfarm-api",type:"error",code:"createCustomerFromLogin"}),v}),await e.login(m).catch(v=>{throw A(v,{action:d.emailPassword,service:"tfe",type:"error"}),h({action:d.emailPassword,service:"tfe",type:"error",code:"login"}),v}),a===n?.email&&n?.credential&&!Y(n?.credential)&&await g.user?.linkWithCredential(n.credential).catch(v=>{throw A(v,{action:d.emailPassword,service:"firebase",type:"error"}),h({action:d.emailPassword,service:"firebase",type:"error",code:v?.code}),v});const{id:f,isSocialLogin:C}=await ae(g,d.emailPassword);return o("setLoggedContext",{customerData:{id:f,displayName:E},isSocialLogin:C}),h({action:d.emailPassword,type:"success",service:""}),g.user}catch(l){if(t(I.SET_LOADING_STATE,!1),F.userNotFound===l.code||F.wrongPassword===l.code){if(c>0)throw t(I.ADD_ERROR,L.wrongPassword),l;try{return await e.checkFirebaseUser(a,s).catch(g=>{throw A(g,{action:d.emailPassword,service:"fishfarm-api",type:"error"}),h({action:d.emailPassword,service:"fishfarm-api",type:"error",code:"checkFirebaseUser"}),g}),c++,o("loginWithEmail",{email:a,password:s,rememberMe:i,attemptCounter:c})}catch(g){throw t(I.ADD_ERROR,L.wrongPassword),g}}await u().signOut().then(()=>{S.error({err:l,visitorId:r.context.visitorId},"Customer auth - login failed internally. User was normally logged on firebase sdk.")}).catch(g=>{throw A(g,{action:d.emailPassword,service:"firebase",type:"error"}),h({action:d.emailPassword,service:"firebase",type:"error",code:g?.code}),g});const p=q.includes(l.code);throw t(I.ADD_ERROR,p?Z(F)[l.code]:L.unknownError),l}},async loginWithFacebook({commit:t,dispatch:o,rootState:r}){o("reset");const a=await M({firebaseConfiguration:r.context.firebaseConfiguration,locale:r.context.locale});try{o("setLoginTentative"),h({action:d.facebookAccessToken,type:"attempt",service:""});const n=new a.FacebookAuthProvider,s=await a().signInWithPopup(n).catch(m=>{throw A(m,{action:d.facebookAccessToken,service:"firebase",type:"error"}),h({action:d.facebookAccessToken,service:"firebase",type:"error",code:m?.code}),m});if(ye(r),!s.user?.email){a().currentUser?.delete();const m={code:L.noEmailInUserCredential};throw A(m,{action:d.facebookAccessToken,service:"firebase",type:"error"}),h({action:d.facebookAccessToken,service:"firebase",type:"error",code:m.code}),m}s.credential?.accessToken&&await e.validateFacebookToken(s.credential.accessToken).catch(m=>{throw A(m,{action:d.facebookAccessToken,service:"tfe",type:"error"}),h({action:d.facebookAccessToken,service:"tfe",type:"error",code:m?.code}),m});const i=s.user?.displayName,[c,u=""]=J(i);r.context.allowLoginOnFishfarm&&await e.createCustomerFromLogin({actionOrigin:d.facebookAccessToken,customerData:{firstName:c,lastName:u,facebookAccessToken:s.credential?.accessToken,facebookUserId:s.user?.uid,isSubscribedForNewsletter:!1,locale:r.context.locale},softOptInDisplayed:!1}).then(()=>a().currentUser?.getIdToken(!0)).catch(m=>{throw A(m,{action:d.facebookAccessToken,service:"fishfarm-api",type:"error"}),h({action:d.facebookAccessToken,service:"fishfarm-api",type:"error",code:"createCustomerFromLogin"}),m});const l=await s.user?.getIdToken(r.context.allowLoginOnFishfarm).catch(m=>{throw A(m,{action:d.facebookAccessToken,service:"firebase",type:"error"}),h({action:d.facebookAccessToken,service:"firebase",type:"error",code:m?.code}),m});await e.login(l).catch(m=>{throw A(m,{action:d.facebookAccessToken,service:"tfe",type:"error"}),h({action:d.facebookAccessToken,service:"tfe",type:"error",code:"login"}),m});const{id:p,isSocialLogin:g}=await ae(s,d.facebookAccessToken);return o("setLoggedContext",{customerData:{id:p,displayName:i,firstName:c,lastName:u},isSocialLogin:g}),h({action:d.facebookAccessToken,type:"success",service:""}),s.user}catch(n){if(t(I.SET_LOADING_STATE,!1),F.facebookAccountExists===n.code){const s=await a().fetchSignInMethodsForEmail(n.email).then(i=>{const{credential:c,email:u}=n;let l;if(i.includes(a.EmailAuthProvider.PROVIDER_ID))l=L.facebookEmailExists;else if(i.includes(a.GoogleAuthProvider.PROVIDER_ID))l=L.facebookGoogleExists;else throw new Error("No used provider has been connected yet.");return o("cleanErrors"),t(I.ADD_ERROR,l),t(I.ADD_FACEBOOK_DATA,{credential:c,email:u}),Promise.resolve(l)}).catch(i=>{throw A(i,{action:d.facebookAccessToken,service:"firebase",type:"error"}),h({action:d.facebookAccessToken,service:"firebase",type:"error",code:i?.code}),i});throw new Error(s??L.unknownError)}else throw q.includes(n.code)?(t(I.ADD_ERROR,Z(F)[n.code]),n):(t(I.ADD_ERROR,L.facebookUnknownError),n)}},async loginWithGoogle({commit:t,dispatch:o,rootState:r},{facebookData:a,loginEmail:n}){o("reset");try{const s=await M({firebaseConfiguration:r.context.firebaseConfiguration,locale:r.context.locale});o("setLoginTentative"),h({action:d.googleAccessToken,type:"attempt",service:""});const i=new s.GoogleAuthProvider;Y(n)||i.setCustomParameters({login_hint:n});const c=await s().signInWithPopup(i).catch(w=>{throw A(w,{action:d.googleAccessToken,service:"firebase",type:"error"}),h({action:d.googleAccessToken,service:"firebase",type:"error",code:w?.code}),w}),u=c.user?.displayName,[l,p]=J(u);ye(r),r.context.allowLoginOnFishfarm&&await e.createCustomerFromLogin({actionOrigin:d.googleAccessToken,customerData:{firstName:l,lastName:p,googleAccessToken:c.credential?.accessToken,googleUserId:c.user?.uid,isSubscribedForNewsletter:!1,locale:r.context.locale},softOptInDisplayed:!1}).then(()=>s().currentUser?.getIdToken(!0)).catch(w=>{throw A(w,{action:d.googleAccessToken,service:"fishfarm-api",type:"error"}),h({action:d.googleAccessToken,service:"fishfarm-api",type:"error",code:"createCustomerFromLogin"}),w});const g=await c.user?.getIdToken(r.context.allowLoginOnFishfarm).catch(w=>{throw A(w,{action:d.googleAccessToken,service:"firebase",type:"error"}),h({action:d.googleAccessToken,service:"firebase",type:"error",code:w?.code}),w});await e.login(g).catch(w=>{throw A(w,{action:d.googleAccessToken,service:"tfe",type:"error"}),h({action:d.googleAccessToken,service:"tfe",type:"error",code:"login"}),w});const{id:m,isSocialLogin:E}=await ae(c,d.googleAccessToken);return c.user?.email===a?.email&&a?.credential&&!Y(a?.credential)&&await c.user?.linkWithCredential(a.credential).catch(w=>{throw A(w,{action:d.googleAccessToken,service:"firebase",type:"error"}),h({action:d.googleAccessToken,service:"firebase",type:"error",code:w?.code}),w}),o("setLoggedContext",{customerData:{id:m,displayName:u,firstName:l,lastName:p},isSocialLogin:E}),h({action:d.googleAccessToken,type:"success",service:""}),c.user}catch(s){throw t(I.SET_LOADING_STATE,!1),q.includes(s.code)?(t(I.ADD_ERROR,Z(F)[s.code]),s):(t(I.ADD_ERROR,L.googleUnknownError),s)}},async loginWithApple({commit:t,dispatch:o,rootState:r}){o("reset");try{const a=await M({firebaseConfiguration:r.context.firebaseConfiguration,locale:r.context.locale});o("setLoginTentative"),h({action:d.appleAccessToken,type:"attempt",service:""});const n=new a.OAuthProvider("apple.com"),s=await a().signInWithPopup(n).catch(m=>{throw A(m,{action:d.appleAccessToken,service:"firebase",type:"error"}),h({action:d.appleAccessToken,service:"firebase",type:"error",code:m?.code}),m});if(ye(r),!s.user?.email){a().currentUser?.delete();const m={code:L.noEmailInUserCredential};throw A(m,{action:d.appleAccessToken,service:"firebase",type:"error"}),h({action:d.appleAccessToken,service:"firebase",type:"error",code:m.code}),m}const i=s.user?.displayName,[c,u=""]=J(i);r.context.allowLoginOnFishfarm&&await e.createCustomerFromLogin({actionOrigin:d.appleAccessToken,customerData:{firstName:c,lastName:u,isSubscribedForNewsletter:!1,locale:r.context.locale},softOptInDisplayed:!1}).then(()=>a().currentUser?.getIdToken(!0)).catch(m=>{throw A(m,{action:d.appleAccessToken,service:"fishfarm-api",type:"error"}),h({action:d.appleAccessToken,service:"fishfarm-api",type:"error",code:"createCustomerFromLogin"}),m});const l=await s.user?.getIdToken(r.context.allowLoginOnFishfarm).catch(m=>{throw A(m,{action:d.appleAccessToken,service:"firebase",type:"error"}),h({action:d.appleAccessToken,service:"firebase",type:"error",code:m?.code}),m});await e.login(l).catch(m=>{throw A(m,{action:d.appleAccessToken,service:"tfe",type:"error"}),h({action:d.appleAccessToken,service:"tfe",type:"error",code:"login"}),m});const{id:p,isSocialLogin:g}=await ae(s,d.appleAccessToken);return o("setLoggedContext",{customerData:{id:p,displayName:i,firstName:c,lastName:u},isSocialLogin:g}),h({action:d.appleAccessToken,type:"success",service:""}),s.user}catch(a){throw t(I.SET_LOADING_STATE,!1),q.includes(a.code)?(t(I.ADD_ERROR,Z(F)[a.code]),a):(t(I.ADD_ERROR,L.appleUnknownError),a)}},async initializeOneTap({dispatch:t,rootState:o},{delay:r,containerName:a,analyticsLogger:n}){if(["ShoppingCart","CustomerInformation","PaymentInformation","AdditionalPaymentInformation","BookingSummary","Confirmation","Login","SignUp"].includes(a))return;const i=async({credential:u})=>{try{t("setLoginTentative"),h({action:d.googleOneTap,type:"attempt",service:""});const l=await M({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale}),p=l.GoogleAuthProvider.credential(u),g=await l().signInWithCredential(p).catch(v=>{throw A(v,{action:d.googleOneTap,service:"firebase",type:"error"}),h({action:d.googleOneTap,service:"firebase",type:"error",code:v?.code}),v}),m=g.user?.displayName,[E,y=""]=J(m);ye(o),o.context.allowLoginOnFishfarm&&await e.createCustomerFromLogin({actionOrigin:d.googleOneTap,customerData:{firstName:E,lastName:y,googleAccessToken:g.credential.accessToken,googleUserId:g.user?.uid,isSubscribedForNewsletter:!1,locale:o.context.locale},softOptInDisplayed:!1}).then(()=>l().currentUser?.getIdToken(!0)).catch(v=>{throw A(v,{action:d.googleOneTap,service:"fishfarm-api",type:"error"}),h({action:d.googleOneTap,service:"fishfarm-api",type:"error",code:"createCustomerFromLogin"}),v});const w=await g.user?.getIdToken(o.context.allowLoginOnFishfarm).catch(v=>{throw A(v,{action:d.googleOneTap,service:"firebase",type:"error"}),h({action:d.googleOneTap,service:"firebase",type:"error",code:v?.code}),v});await e.login(w).catch(v=>{throw A(v,{action:d.googleOneTap,service:"tfe",type:"error"}),h({action:d.googleOneTap,service:"tfe",type:"error",code:"login"}),v});const{id:f,isSocialLogin:C}=await ae(g,d.googleOneTap);h({action:d.googleOneTap,type:"success",service:""}),t("setLoggedContext",{customerData:{id:f,displayName:m,firstName:E,lastName:y},isSocialLogin:C}),t("afterAuthenticated",{refreshAfterAuthentication:!0,message:"login"})}catch(l){throw V(t)("notifications/setMessage","loginFailed"),$r(),l}};await Br(()=>{Wr(window)?(window.google?.accounts.id.initialize({client_id:o.googleOneTapID,cancel_on_tap_outside:!1,auto_select:!0,callback:i}),window.google?.accounts.id.prompt(u=>{Yr(u,n,a)})):S.warn("One tap could not be initialized.")},r)},async updateDisplayName({rootState:t},o){(await M({firebaseConfiguration:t.context.firebaseConfiguration,locale:t.context.locale}))().currentUser?.updateProfile({displayName:o}).catch(a=>{throw A(a,{action:"updateDisplayName",service:"firebase",type:"error"}),h({action:"updateDisplayName",service:"firebase",type:"error",code:a?.code}),a})},async checkSessionValidity({dispatch:t,rootState:o,state:r},{redirect:a,redirectPath:n}={redirect:!1,redirectPath:""}){const s=await M({firebaseConfiguration:o.context.firebaseConfiguration,locale:o.context.locale});try{const c=(await new Promise((u,l)=>{s().onAuthStateChanged(async p=>{u(p?await p.getIdTokenResult():null)},l)}))?.token;if(r.revalidateSession){const l=ee().get("csrfToken"),p=await s().currentUser?.getIdToken(!0);if(p&&l)try{await e.reissueFirebaseSessionCookie({freshIdToken:p,csrfToken:l}),a&&window.location.replace(n)}catch(g){A(g.toJSON(),{action:"checkSessionValidity",service:"tfe",type:"error"}),h({action:"checkSessionValidity",service:"tfe",type:"error",code:g.code})}}c||t("logout")}catch(i){A(i,{action:"checkSessionValidity",service:"tfe",type:"error"}),h({action:"checkSessionValidity",service:"tfe",type:"error",code:i?.code}),await t("logout"),a&&window.location.replace("/")}},async fetchProvidersForEmail({rootState:t,commit:o},r){const a=t.auth.providerData;if(!(a?.oldEmail&&a.oldEmail===r))try{h({action:d.fetchSignInMethods,type:"attempt",service:""});const s=(await e.fetchSignInMethodsForEmail({email:r})).data;o(I.SET_PROVIDER_DATA,{providers:s,email:r,oldEmail:r,error:void 0}),h({action:d.fetchSignInMethods,type:"success",service:""})}catch(n){o(I.SET_PROVIDER_DATA,{providers:void 0,email:r,oldEmail:r,error:n.message}),h({action:d.fetchSignInMethods,type:"error",service:"auth",code:n?.message}),A(n,{action:d.fetchSignInMethods,type:"error",service:"auth"})}},async triggerEmailLoginLink({commit:t,dispatch:o,rootState:r},{nextUri:a,email:n}){try{await o("reset"),h({action:d.triggerEmailLoginLink,type:"attempt",service:"auth"});const s=De(r.context?.localePath,a),i=new URL(s,window.location.origin);if(!await e.triggerEmailLoginLink({email:n,nextUri:i.href}))throw new Error(L.sendEmailLinkLoginFailed)}catch(s){throw A(s,{action:d.triggerEmailLoginLink,service:"auth",type:"error"}),h({action:d.triggerEmailLoginLink,service:"auth",type:"error",code:L.sendEmailLinkLoginFailed}),t(I.ADD_ERROR,L.sendEmailLinkLoginFailed),s}finally{t(I.SET_LOADING_STATE,!1)}},async isEmailLoginLink({commit:t,dispatch:o,rootState:r},{emailLink:a}){await o("reset");const n=await M({firebaseConfiguration:r.context.firebaseConfiguration,locale:r.context.locale});try{return n().isSignInWithEmailLink(a)}catch(s){return t(I.ADD_ERROR,q.includes(s.code)?Z(F)[s.code]:L.unknownError),!1}finally{t(I.SET_LOADING_STATE,!1)}},async loginWithEmailLink({commit:t,dispatch:o,rootState:r},{emailLink:a,email:n}){const s=await M({firebaseConfiguration:r.context.firebaseConfiguration,locale:r.context.locale}),i=(c,u,l)=>{A(c,{action:d.emailLinkAuth,service:u,type:"error"}),h({action:d.emailLinkAuth,service:u,type:"error",code:l})};try{o("setLoginTentative");const c=await s().signInWithEmailLink(n,a);h({action:d.emailLinkAuth,type:"attempt",service:""});const u=await c.user?.getIdToken().catch(m=>{throw i(m,"firebase",m?.code??""),m}),l=c.user?.displayName,[p,g]=J(l);if(r.context.allowLoginOnFishfarm&&await e.createCustomerFromLogin({actionOrigin:d.emailLinkAuth,customerData:{firstName:p,lastName:g,isSubscribedForNewsletter:!1,locale:r.context.locale},softOptInDisplayed:!1}).then(()=>s().currentUser?.getIdToken(!0)).catch(m=>{throw i(m,"fishfarm-api","createCustomerFromLogin"),m}),await e.login(u).catch(m=>{throw i(m,"tfe","login"),m}),c.user?.email!==n)throw new Error(L.invalidEmail);return{user:c.user}}catch(c){await s().signOut().then(()=>{S.error({err:c,visitorId:r.context.visitorId},"Customer auth - login failed internally. User was normally logged on firebase sdk.")}).catch(l=>{i(l,"firebase",l?.code??"")});const u=q.includes(c.code);return t(I.ADD_ERROR,u?Z(F)[c.code]:L.unknownError),null}finally{t(I.SET_LOADING_STATE,!1)}}}}const oa=e=>({namespaced:!0,state:Nr,getters:Pr,actions:ta(new mo(e)),mutations:xr});class ra{constructor(t){R(this,"_httpClient");this._httpClient=t}getCustomization(t){return t?this._httpClient.get(new O("partner.partner-customization",{pathParams:{partnerId:t}})):Promise.reject("'partnerId' not defined")}}var $t=(e=>(e.Left="left",e.Right="right",e.Center="center",e.Ribbon="ribbon",e.Inline="inline",e))($t||{}),Wt=(e=>(e.SET_CUSTOMIZATIONS="SET_CUSTOMIZATIONS",e))(Wt||{});const aa="P044CBJ",na=["CD951","DEF9D","C0B32","3F441"],sa=["01Y2MPG","02XPPBE","03EQULS","03SNF3W","5972","06P4PSO","0B44A3F","0B8DZRI","0CON0HG","0CP0QXO","0E4XJJX","0IW6EN4","0K0A9DN","0L2PI24","0LZUBUJ","0SASXPW","0T9P4E6","0TQGVTE","0XL7HTX","0ZQLNL8","135GTQG","1458FZL","15PU58Q","1D44MBY","1E8U2WP","1L7TJPC","1OI4D21","1RBC28W","1UPMKLL","1WP59Q2","1WTXV2N","1ZUGED9","2065C5D","20HO3BX","21RRFNY","225V4QD","2332B","27O9UDB","29AS2HF","29THXHP","2A16HJZ","2DE24","2H8T186","2HJR870","2KL0TM9","2KUFQ7Q","2L38FWQ","2L67BLR","2Q9A0ZX","2TUNCC3","2WIY41U","2XC5OX1","2XL2421","2ZE53TW","3211MSN","3220E","34KVMDR","350RCQK","35LWSXH","36908","37N0TCO","3C17UPH","3C4CNF0","3FRBRDS","3PDZK8Q","3T2BR4Y","3T3P0LA","3UAO31N","3VD1CS2","3ZI0A9Y","415FUMC","43LDHFJ","48REGMI","49P4UDV","4B1CF1E","4BDIXE9","4EQ4D4F","4FC8I8Q","4FXY4T0","4J4G0HS","4K1UC2E","4OZPW3K","4Q28N9P","4VOABIJ","4WQWB3I","4YISO38","56SGQH2","56Z2SWD","574BERX","583AF","58MJRCR","5AZL2X9","5BHD865","5C0YS9N","5CFP5GU","5CM9D6R","5GUNVLM","5I57UA8","5JGJTP3","5KIZYTH","5M7ZNDX","5N6CZEG","5N9CB70","5NUTX45","5OAKLFG","5PIL7LD","5TXD1TK","60EML91","61EE3XP","626HPYF","62W75WX","64BB4","64VIH9O","654T9LY","67O18VU","6DRJRZ3","6EUDJER","6G6AYQ3","6KJ7BBP","6KZWZYE","6N2B5KS","6O5HLZP","6PP0BXM","6RQ8UUC","6TTFCGR","6V416PU","6V6GIES","6W63ETS","6XEGHZQ","6XJBZNC","6XZEDCU","6YHXDKX","6ZRVGVW","723DE","7482RGS","74L7378","77CJKXE","77JYJCD","7APZFWM","7EQRYO3","7GJJ9MO","7HFH8DM","7HXST9E","7J7KMZG","7JBN2IA","7JN69VQ","7KYIG0N","7LX4L8H","7MMHPBN","7P2IUIV","7R9GJVO","7RZFMII","7UOE6L2","7UW9LKJ","7YICLRZ","805336M","84IBX8W","85JUYBT","85RVMSC","88FLV4W","89QB151","8A2HDO3","8CD9INE","8E9H4RC","8FOICLQ","8J15F09","8MK8XFI","8NZ04BB","8R9ZKT2","8RDKZTA","8YO1OZL","91C51RJ","91ND41A","92EP2X3","953CF","966RFBG","98VQ2JQ","9A7M3EG","9BAL9K3","9CCIFXP","9D72E","9JWBZAM","9U6YZ3R","9X70CF7","9XK7HWT","9YGEX5Z","A2W7GRP","A5E74","A7E8C","A842D7V","AB37IUZ","AECWD5H","AEZMJ3U","AJKKMI2","AQZPEN7","AS1RATG","AUCSRCH","B00L8HJ","B0WYJKS","B1UE5NT","B3C5C","B43A2CR","B5MS9EI","B6UBBOI","BALWPWH","BCXEGE3","BDDA09K","BF84I4B","BFNRGP5","BFRSJ00","BGORFP9","BI7OTCB","BIDA72D","BKUN3SE","BLZ51DF","BOVFM15","BR22D8X","BSEYRQ5","BSI6O0M","BSOWSPH","BV034Z4","C0RBWUK","C3MW3RE","C4CBMVV","C87DHZ3","C8WLDEM","CAOFVCM","CBMIZT5","CG3RW27","CJN0PBY","CLMIAMH","CMASTXL","CNQSP8O","CNZWURL","COX7QJU","CTVUR1S","CUCKHU7","D0HFKWK","D1YLN5R","D4LC371","D78D9SP","D86WA5T","DAD0Z57","DD6U0BM","DDF3GX1","DGLLEIE","DHI34P9","DIIVAGE","DLHBLV1","DM0PW1E","DM6ZQRY","DMQUXLC","DT7GKRJ","DWWRIFC","DY48T9H","E0E07CJ","E0GMPTL","E2YFI8A","E43F4NX","E648E","E7D77","EACWMZI","EAURIFB","EB896P7","EDIGTI5","EDUHD9X","EO8D6N3","ERW3A5B","ESDCYDU","ESGVVLK","EXCD7A5","F28BW98","F2GZGY3","F3W8FV3","F4NGZGU","F7OD8R4","FBSMDJA","FCXXC6Y","FCYH8XL","FD0A1","FED39","FJOYZFL","FONE8ET","FSCKUI0","FWBWYI3","FXL8419","FYO05TD","FZLE9RY","G09T6LA","G0N40HD","G3DM6CW","G5OJX9V","G7NOCDZ","G9FL8M3","G9GXYAB","GDWUNB8","GKEBT0A","GSZXA38","GYOQDL0","H3GG64U","HD8LUAH","HDFECUY","HINYD5C","HQ0DHNI","HR4X468","HUX8GGL","HUZMYQC","HYL6NYH","HZOXIQZ","HZPXX19","I6RSJGX","IA5WOYN","IAB1LH7","IC0IS8O","IFLNGWP","IFUY34R","IKPEHIU","IRVHEG6","ITMPSDS","IVMEQNK","J1BXTBR","J2BE1DZ","J5G8NEU","J7KSSCP","J7XJ789","J8K08IS","JJY27H5","JM412RJ","JNLJWXZ","JP88XAE","JRHQB3Z","JS7211Z","JTREV5C","JWOFC8F","JWWPGLS","JXYJOEB","JYKIXBG","K1W8Y49","K6NVULR","K9TD1I9","KCD5706","KF450FD","KIFAALO","KPFX2L4","KQ526VQ","KRY5XUO","KX4ZHIV","L13UZE5","L7XRVC0","LDWMSLD","LE52NEE","LF4WDBG","LIF9K9K","LM7JL18","LPYRXPG","LWWK65X","LXVD2XQ","LYB20A2","M0BOU4H","M3EH8E4","M3YORB0","M57Q1ZC","M83IYDA","MC6OLQ9","MD8527H","MIKJWQ0","MKZ64IS","MLR22CA","MPD13U3","MS42YMD","MTZTHO1","MUGJ4","N470Y2D","N4GEUDS","N4ROZZ4","N631UAT","N7ZR0LK","NBXZGHK","NESA9VR","NI2E7HK","NMBOIBK","NPXC8DS","NT81JNF","NTJ874Y","O06XGZN","O3NM2ZB","O4VT5C1","O58E2AX","O9A8S0D","OEOGWRV","OF1E2ZX","OF8BRPX","ONLGL7H","OS51R2J","OTQ3204","P1ZJANO","P3316KE","P9VQHQO","P9YUZII","PAKTIGU","PBAG5WB","PBRQWMC","PDWYE6O","PF8UYQ2","PHMVB6X","POVA59M","PQKPNM9","PU0TFPZ","PVF3DZ1","PVS3F42","Q1T52XR","Q4VSPAY","Q7T1R0S","QAZFI7K","QD33T3B","QFUD1GW","QK2BE7G","QLZFV2D","QQV9BZZ","QV6DYUB","QVYQDHR","QWLB34Z","QZADIVM","R04V1DM","R4ZI98X","RDM3AJK","RHO617I","RN3LJ7O","RNCEI6Y","RVQKQOC","RZJY51G","S1FGGZK","S2ZPHS8","S6GZQLT","S7DNE5F","S7YYBFD","S81U2A7","S9HE158","S9ZI9O6","SBOOYA2","SCF8DIM","SCL1YZI","SD0KIZJ","SG74WNP","SMV7WIL","SRQYCTQ","SRTON8W","SRU9GFF","ST2OOPK","SW8N3EC","SXAKQ4A","T2B5NKG","T3OU1BK","T4N0VQT","T5EQ0EA","T61ELUS","T6B3YND","T6MRD0B","T8F8PZB","TEZZ706","TFVCWCF","TG89VQ1","TGFVGNJ","TJ7TH8A","TK28ZFV","TKDECGE","TKR4C75","TT63CAE","U0K3XOI","U10MK22","U3Y0T0U","U5WGUAW","U80UMK5","U86ADCW","U9JHP5G","UA9U865","UIS5FOT","UNIMKK5","UOPAPUV","UPYALU2","UWU99A5","UXOU6YU","V0GF2EN","V11XQZG","V2BTRXQ","V57MZBI","V65VV1B","V6YHKIK","V86KE8X","VBWHMTK","VFTUD0S","VH0PTL2","VOA6T34","VTKLJA5","VU82WVK","VYNM3XX","VZ22EP0","W1D6RPG","W7INAEY","W7N7AOR","WHBQ8CZ","WJ3BBNN","WKLS5RP","WNIXEAN","WNWE4AF","WS265BG","WSY4B4T","WUE1YP0","WVCH8YA","WY34CER","X0QXW98","X19XCHW","X4BC27B","X5336VE","X8I8AL7","X9T8Q3L","XCTE0KD","XE1AEGY","XF8LSZX","XFLGGYT","XKZT5VY","XO2NSWV","XOPFOHE","XOV2QP0","XP5R936","XPY2N0O","XPZGZLB","XRFA50W","XRMDGOT","XT39L6D","XUHFZTN","XVMI8ZH","XWJT3DI","XXRQGEP","XYJ201A","Y41PY83","Y7FSIRA","Y80QXS9","YCMGZZW","YPZL8XE","YSO4DOV","YTXVS31","YZAKZBJ","Z2SSYTB","Z3AN9O0","ZA8D085","ZCON2C4","ZERHUD9","ZFKEZNG","ZG9EQ3J","ZRCG4DZ","ZTTLTQC"],ia=e=>({...e,button_color:"",header_bg_color:"",search_background_color:"",footer_background_color:"",back_to_home_color:"",image_url:""}),ca=e=>!!sa.includes(e),{SET_CUSTOMIZATIONS:j}=Wt,la=()=>({customizations:void 0});function ua(e){const t=e.customizations?.loyalty_program_identifier??"",o=e.customizations?.partner_hash??"";return fo.includes(o)?o:t}const da={hash:e=>e.customizations?.partner_hash??"",buttonColor:e=>e.customizations?.button_color??"",headerBgColor:e=>e.customizations?.header_bg_color??"",headerLayout:e=>e.customizations?.header_layout??$t.Left,displayHeader:e=>e.customizations?.display_header??!0,imageURL:e=>e.customizations?.image_url??"",homepageURL:e=>e.customizations?.homepage_url??"",brandName:e=>e.customizations?.brand_name??"",displayLoginSignUp:e=>e.customizations?.display_login_signup??!0,displayWishlist:e=>e.customizations?.display_wishlist??!0,displayWishlistButtonOnCards:e=>e.customizations?.display_wishlist_button_on_cards??!0,displayCart:e=>e.customizations?.display_cart??!0,displayNewsletterSignup:e=>e.customizations?.display_newsletter_signup??!0,backToHomeText:e=>e.customizations?.back_to_home_text??"",backToHomeColor:e=>e.customizations?.back_to_home_color??"",footerNotification:e=>e.customizations?.footer_notification_gettext_key??"",footerNotificationDismissible:e=>e.customizations?.footer_notification_dismissable??!0,headerNotification:e=>e.customizations?.header_notification_gettext_key??"",headerNotificationDismissible:e=>e.customizations?.header_notification_dismissable??!0,loyaltyProgramIdentifier:ua,searchBgColor:e=>e.customizations?.search_background_color??null,displayGygLogo:e=>e.customizations?.display_gyg_logo??!0,excludedCategories:e=>e.customizations?.excluded_categories?.split(",").map(t=>t.trim()).filter(Boolean)??[],excludedTours:e=>e.customizations?.excluded_tours?.split(",").map(t=>t.trim()).filter(Boolean)??[],displayCustomFooter:e=>e.customizations?.display_custom_footer??!1,footerBackgroundColor:e=>e.customizations?.footer_background_color??null,displayAppCallout:e=>e.customizations?.display_app_callout??!0,customHomepagePath:e=>e.customizations?.custom_homepage_path??null,isEmirates:e=>e.customizations?.partner_hash===go,isAmexPartnerCustomization:e=>e.customizations?.partner_hash===aa},pa=e=>({fetchCustomizations:async({commit:t,rootState:o},r)=>{if(na.includes(r.toUpperCase()))t(j,void 0);else{t(j,{partner_hash:r});try{const a=await e.getCustomization(r),{data:n}=a;ca(r)&&te(o,wo,"B")?t(j,ia(n)):t(j,n)}catch{t(j,void 0)}}}}),ma={[j](e,t){e.customizations=t}},ga=e=>({namespaced:!0,state:la,getters:da,actions:pa(new ra(e)),mutations:ma}),wa={mapsApiLoaded:e=>e.mapsApiLoaded},fa={SET_MAPS_API_LOADED(e,t){e.mapsApiLoaded=t}},Ea=()=>({mapsApiLoaded:!1});function ha(){return{namespaced:!0,state:Ea,getters:wa,mutations:fa}}const _={activitiesData:"activitiesData",isLoading:"isLoading",locationData:"locationData",topLocationsHeader:"topLocationsHeader",relatedTopLocations:"relatedTopLocations",relatedLocation:"relatedLocation",collections:"collections",collectionsUid:"collectionsUid",categoryNavigation:"categoryNavigation",topSightsRankingUuid:"topSightsRankingUuid",attractionTripItemsData:"attractionTripItemsData",nearestLocations:"nearestLocations",nearestActivity:"nearestActivity",tripItems:"tripItems",tripItemGroupCategories:"tripItemGroupCategories",tripItemGroupNavigationItems:"tripItemGroupNavigationItems",parentLocationData:"parentLocationData",locationOverview:"locationOverview",recommendations:"recommendations",showRecommendations:"showRecommendations",isCurated:"isCurated",activeTab:"activeTab",entryTab:"entryTab",activeTcId:"activeTcId",showTabbingContent:"showTabbingContent",searchAssistantSamplePrompts:"searchAssistantSamplePrompts",searchAssistantLatestChatResponse:"searchAssistantLatestChatResponse",headerReviewsClicked:"headerReviewsClicked"},fc={activitiesData:`location/${_.activitiesData}`,isLoading:`location/${_.isLoading}`,locationData:`location/${_.locationData}`,topLocationsHeader:`location/${_.topLocationsHeader}`,relatedTopLocations:`location/${_.relatedTopLocations}`,relatedLocation:`location/${_.relatedLocation}`,collections:`location/${_.collections}`,collectionsUid:`location/${_.collectionsUid}`,categoryNavigation:`location/${_.categoryNavigation}`,topSightsRankingUuid:`location/${_.topSightsRankingUuid}`,attractionTripItemsData:`location/${_.attractionTripItemsData}`,nearestLocations:`location/${_.nearestLocations}`,nearestActivity:`location/${_.nearestActivity}`,tripItems:`location/${_.tripItems}`,tripItemGroupCategories:`location/${_.tripItemGroupCategories}`,tripItemGroupNavigationItems:`location/${_.tripItemGroupNavigationItems}`,parentLocationData:`location/${_.parentLocationData}`,locationOverview:`location/${_.locationOverview}`,recommendations:`location/${_.recommendations}`,showRecommendations:`location/${_.showRecommendations}`,isCurated:`location/${_.isCurated}`,activeTab:`location/${_.activeTab}`,entryTab:`location/${_.entryTab}`,activeTcId:`location/${_.activeTcId}`,showTabbingContent:`location/${_.showTabbingContent}`,searchAssistantSamplePrompts:`location/${_.searchAssistantSamplePrompts}`,searchAssistantLatestChatResponse:`location/${_.searchAssistantLatestChatResponse}`,headerReviewsClicked:`location/${_.headerReviewsClicked}`},Ta={[_.activitiesData]:e=>de(e,"activitiesData")?pe(e,"activitiesData"):e.activitiesData,[_.isLoading]:e=>e.isLoading,[_.locationData]:e=>e.locationData,[_.topLocationsHeader]:e=>e.topLocationsHeader,[_.relatedTopLocations]:e=>de(e,"relatedTopLocations")?pe(e,"relatedTopLocations"):e.relatedTopLocations,[_.relatedLocation]:e=>e.relatedLocation,[_.collections]:e=>e.collections,[_.collectionsUid]:e=>e.collectionsUid,[_.categoryNavigation]:e=>e.categoryNavigation,[_.topSightsRankingUuid]:e=>e.topSightsRankingUuid,[_.attractionTripItemsData]:e=>de(e,"attractionTripItemsData")?pe(e,"attractionTripItemsData"):e.attractionTripItemsData,[_.nearestLocations]:e=>de(e,"nearestLocations")?pe(e,"nearestLocations"):e.nearestLocations,[_.nearestActivity]:e=>e.nearestActivity??Mt,[_.tripItems]:e=>de(e,"tripItems")?pe(e,"tripItems"):e.tripItems||[],[_.tripItemGroupCategories]:e=>e.tripItemGroupCategories||[],[_.tripItemGroupNavigationItems]:e=>e.tripItemGroupNavigationItems||[],[_.parentLocationData]:e=>e?.parentLocationData??null,[_.locationOverview]:e=>e.locationOverview||{},[_.recommendations]:e=>e.recommendations||{},[_.showRecommendations]:e=>e.showRecommendations||!1,[_.isCurated]:e=>Eo.includes(e.locationData?.id??0)&&!e.locationData?.category,[_.activeTab]:e=>e.activeTab,[_.entryTab]:e=>e.entryTab,[_.activeTcId]:e=>e.activeTcId,[_.showTabbingContent]:e=>{if(!e.locationData)return!1;const t=new ho(e.locationData);return!t.isCategory&&!t.isTripItem&&!t.isTripItemGroup},[_.searchAssistantSamplePrompts]:e=>e?.searchAssistantSamplePrompts,[_.searchAssistantLatestChatResponse]:e=>e?.searchAssistantLatestChatResponse,[_.headerReviewsClicked]:e=>e?.headerReviewsClicked};function Et(e){const t=`${e}`;return t.length<2?`0${t}`:t}function ht(e){const t=e.getFullYear(),o=Et(e.getMonth()+1),r=Et(e.getDate());return`${t}-${o}-${r}`}const _a=2,Ia=7;class Sa{constructor(t){R(this,"_cookieManager");this._cookieManager=t}getDateFromCookie(){return this._cookieManager.get("dateFrom")}expireDateFromCookie(){return this._cookieManager.get("dateFrom")}getAvailabilityDates(t){const o=new Date,a=ht(fr(o,t?_a:Ia)),n=ht(o);return{to:a,from:n}}}const Aa=()=>({activitiesData:{},isLoading:!1,locationData:null,parentLocationData:null,topLocationsHeader:null,relatedTopLocations:null,relatedLocation:null,collections:[],collectionsUid:"",categoryNavigation:void 0,topSightsRankingUuid:void 0,attractionTripItemsData:{items:[]},nearestLocations:[],nearestActivity:Object.assign({},Mt),tripItems:[],tripItemGroupCategories:[],tripItemGroupNavigationItems:[],activeTab:"",entryTab:"",cache:{},activeTcId:void 0,searchAssistantSamplePrompts:Io,searchAssistantLatestChatResponse:So,headerReviewsClicked:!1});function ya(e,t){return{namespaced:!0,state:Aa,actions:To(new le(e),new Sa(t)),getters:Ta,mutations:_o}}function Ec(e){return`locationExperiments/${e}`}const Re={isTripItemNavigationActive:"isTripItemNavigationActive",showTripItemActivitiesSwimlanes:"showTripItemActivitiesSwimlane",showPoiTripItemRecommendations:"showPoiTripItemRecommendations",showTcTripItemRecommendations:"showTcTripItemRecommendations"},Ra={[Re.isTripItemNavigationActive]:e=>e.isTripItemNavigationActive,[Re.showTripItemActivitiesSwimlanes]:e=>e.showTripItemActivitiesSwimlanes,[Re.showPoiTripItemRecommendations]:e=>e.showPoiTripItemRecommendations,[Re.showTcTripItemRecommendations]:e=>e.showTcTripItemRecommendations},va=()=>({isTripItemNavigationActive:!1,showTripItemActivitiesSwimlanes:!1,showPoiTripItemRecommendations:!1,showTcTripItemRecommendations:!1});function Ca(){return{namespaced:!0,state:va,actions:Ao(),getters:Ra,mutations:yo}}class x extends Error{constructor(o,r){super();R(this,"url");R(this,"statusCode");this.name="RedirectionError",this.url=o,r&&(this.statusCode=r)}}const Tt=.11,ve="viasatInteractionId";function La(e,t){return{validateOffer:async({commit:o})=>{const r=!!e.get(ve);o("SET_VIASAT_OFFER_BANNER",r)},redirectVisitor:async({getters:o,rootGetters:r},{offerInteractionId:a,airportcodes:n})=>{U.increment("viasat.redirect_user");const s=r["context/partnerSession"]?.cmp,i=E=>{if(!s)return E;try{const y=new URL(E,r["context/currentUrl"]);return y.searchParams.append("cmp",s),y.pathname+y.search}catch(y){return S.error({offerInteractionId:a,error:y,partnerHash:u,cmpParam:s,url:E,currentUrl:r["context/currentUrl"]},"[Viasat]: error while adding cmp param to url"),E}},c=i("/");if(!o.isViasatPartner||!a)return e.expire(ve),Promise.reject(new x(c,302));const u=r["context/partnerSession"]?.partnerHash;e.set(ve,a,{maxAge:12*60*60});let l;try{l=await t.fetchOfferInteractionDetails(a)}catch(E){return S.error({offerInteractionId:a,error:E,partnerHash:u},"[Viasat]: error during fetching offer details"),Promise.reject(new x(c,302))}const p=l.locationData?.destinationICAO;if(!p)return S.error({offerInteractionId:a,partnerHash:u},"[Viasat]: destination ICAO code is missing"),Promise.reject(new x(c,302));const g=n[p];return g?i(`/s/?q=iata:${g}`):(S.error({offerInteractionId:a,partnerHash:u,destinationIATA:g},"[Viasat]: destination ICAO has no IATA code pair"),Promise.reject(new x(c,302)))},activateViasatOffer:async({commit:o,getters:r,rootGetters:a})=>{const n=e.get(ve);if(n&&r.isViasatPartner)try{const s=a["confirmation/confirmationData"];if(!s)return;const{totalPrice:i,shoppingCartHash:c,status:u}=s.shoppingCart,l={totalPrice:i,shoppingCartHash:c,status:u},p=a["context/partnerSession"]?.partnerHash;if(!await t.isValidOffer(p,l.totalPrice.currencyIsoCode,c,l.totalPrice.amount)){o("SET_VIASAT_OFFER_BANNER",!1);return}const g={cpaAmount:0,cpaCurrency:"USD",txnAmountGross:l.totalPrice.amount,txnCurrency:l.totalPrice.currencyIsoCode,commissionAmount:l.totalPrice.amount*Tt,commissionCurrency:l.totalPrice.currencyIsoCode,commissionPercent:Tt*100,txnSponsorId:l.shoppingCartHash},m=await t.activateOffer(n,g);o("SET_VIASAT_REDIRECTION_URL",m),o("SET_VIASAT_OFFER_BANNER",!0)}catch{o("SET_VIASAT_OFFER_BANNER",!1)}}}}const Oa={SET_VIASAT_REDIRECTION_URL(e,t){e.viasatRedirectionUrl=t},SET_VIASAT_OFFER_BANNER(e,t){e.showViasatOfferBanner=t}},Da=["VQAMFS9","RWCBIH3","ZR3B5IX","IST208K","9VJBN9T"],ba=e=>Da.includes(e),Na={bannerColor:(e,t,o,r)=>r["partnerCustomizations/headerBgColor"]||"#0B2443",viasatRedirectionUrl:e=>e.viasatRedirectionUrl,isViasatPartner:(e,t,o,r)=>{const a=r["context/partnerSession"]?.partnerHash;return a&&ba(a)},showViasatOfferBanner:(e,t)=>t.isViasatPartner&&e.showViasatOfferBanner,allowedPaymentMethods:(e,t)=>t.isViasatPartner?[Be.paypal,Be.creditcard,Be.none]:[]};class Ye extends O{get url(){if(!this._definition.path)throw new Error(`API definition for ${this.name} has no path definition`);return this._definition.path}get path(){const t=new URL(this._definition.path).origin,o=mr(this._definition.path.replace(t,"")),r=this.pathParams||{};try{return t+o(r)}catch(a){return S.error({pathParams:this.pathParams,api:this.api,name:this.name,error:a},"Non GYG API path validation error"),"/_invalid_path"}}}class Pa{constructor(t,o){R(this,"_httpClient");R(this,"_credentials");R(this,"fetchOfferInteractionDetails",async t=>{const o=await this.fetchAuthToken(),r=new Ye("nongyg.viasat-details",{pathParams:{offerInteractionId:t}});let a=null;try{a=await this._httpClient.get(r,{timeout:4e3,headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}})}catch(n){throw S.error({offerInteractionId:t,error:n},`[Viasat] Could not fetch Viasat offer details: ${n.message}`),n}if(a?.status>=200&&a?.status<300)return a.data;{const n=await a.data;throw S.error({offerInteractionId:t,error:n},`[Viasat] Viasat offer details returned with an error: ${n.message}`),new Error(a.data.message)}});this._httpClient=t,this._credentials=o}async activateOffer(t,o){U.increment("viasat.activate_offer");const r=await this.fetchAuthToken(),a=new Ye("nongyg.viasat-activation",{searchString:`/?offer-interaction-id=${t}`}),n=await this._httpClient.post(a,o,{timeout:4e3,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});if(n.status>=200&&n.status<300){const s=n?.data?.redirectURL;return s||(S.error({response:n.data,offerInteractionId:t},"[Viasat] Redirection url must be defined in the response."),null)}else{if(n.status===400&&!n.data.message)return null;throw new Error(n.data.message)}}async fetchAuthToken(){const t=new Ye("nongyg.viasat-auth",{searchString:`?stripe=${this._credentials.viasatStripe}&name=${this._credentials.viasatAuthTokenName}`}),o=Buffer.from(`${this._credentials.viasatUsername}:${this._credentials.viasatPassword}`).toString("base64");let r;try{r=await this._httpClient.get(t,{headers:{Authorization:`Basic ${o}`}})}catch(a){throw S.error({error:a},`[Viasat] Authentication failed: ${a.message}`),a}if(r.status>=200&&r.status<300)return r.data;throw new Error(r.data.message)}async getTransactionValueInEur(t){const o=await this._httpClient.get(new O("travelers-api.transaction-value-in-eur",{pathParams:{shoppingCartHash:t}}));if(!o?.data?.transactionValueInEur)throw new Error("problem getting transaction value in Eur");return o.data.transactionValueInEur}async isValidOffer(t,o,r,a){const u=t==="RWCBIH3"&&o==="USD"||o==="EUR"?a:await this.getTransactionValueInEur(r);return!!(u&&u>=50)}}const ka=()=>({viasatRedirectionUrl:null,showViasatOfferBanner:!1});function xa(e,t,o){return{namespaced:!0,state:ka,getters:Na,mutations:Oa,actions:La(t,new Pa(e,o))}}var be=(e=>(e.bookingLevel="bookingLevel",e.travelerLevel="travelerLevel",e.fallback="fallback",e))(be||{}),rt=(e=>(e.pickupLocation="booking_pickup_location",e.flightDetails="booking_flight_details",e))(rt||{});const Ua={shoppingCartAlreadyProcessed:"shopping-cart-already-processed",shoppingCartNotProcessed:"shopping-cart-not-processed"};class Ne{constructor(t){R(this,"identifier");this.identifier=t}static isAvailable(){return!!window?.hj}trigger(){Ne.isAvailable()&&window.hj?.("trigger",this.identifier)}static event(t){Ne.isAvailable()&&window.hj?.("event",t)}}function _t(e){return Ma(e,Ro.activity)}function Ma(e,t){return e?.filter(o=>o?.itemType===t)??[]}const Fa=(e,t,o)=>{const r=e.match(/^customerBillingInformation\.(\w+)\.(\w+)$/);if(r&&r.length===3){const a=r[1],n=r[2];o("SET_CUSTOMER_INFORMATION_FORM_ERROR",{addressType:a,label:n,value:t})}},It=(e,t,o)=>{const r=e.match(/^(supplierRequestedInformationPerBooking\[(\d+)\]\.)?(travelerLevel|bookingLevel|fallback)(\[(\d+)\])?\.(answersForEachTraveler\[(\d+)\]\.)?(?:answer\.)?(\w+)$/);if(r&&r.length===9){const a=r[8],n={bookingIndex:parseInt(r[2])||0,type:r[3],itemIndex:r[5]?parseInt(r[4]):void 0,travelerIndex:r[7]?parseInt(r[7]):void 0,error:{[a]:t}};o("SET_SUPPLIER_REQUESTED_INFORMATION_FORM_ERROR",n)}};function Ha(e){return e=JSON.parse(JSON.stringify(e)),e.supplierRequestedInformationPerBooking?.flatMap(t=>Ga(t.supplierRequestedInformation,!1)),e}function Yt(e){return e.answer&&(delete e.answer.isLocationConfirmed,delete e.answer.selectNowOrLater,e.answer.pickupNoteCheckboxSelected||delete e.answer.pickupNote,delete e.answer.pickupNoteCheckboxSelected),e}function Ga(e,t=!0){return e=t?JSON.parse(JSON.stringify(e)):e,(e?.bookingLevel??[])?.filter(o=>o.identifier===rt.pickupLocation)?.forEach(Yt),e}function Ba(e){if("answersForEachTraveler"in e)return e.answersForEachTraveler??[];let t=e;return"identifier"in e&&t.identifier===rt.pickupLocation&&(t=JSON.parse(JSON.stringify(t)),t=Yt(t)),t.answer}const St=(e,t)=>{const o=_t(t.shoppingCartItems??[]);e.shoppingCartItems&&t.shoppingCartItems&&_t(e.shoppingCartItems).forEach(r=>{const a=o?.find(n=>n.id===r.id);a&&(r.supplierInfo=a.supplierInfo,r.activityReviews=a.activityReviews,r.vacancies=a.vacancies)})};function Va(e,t,o,r,a,n){return{initCustomerInformationRequest:async({rootGetters:s,dispatch:i})=>{const u=s["customerInformation/customerInformationData"]?.customerBillingInformation?.billingDetails;await i("setBillingDetails",u)},setBillingDetails:async({commit:s},i)=>{s("SET_CUSTOMER_INFORMATION_BILLING_DETAILS",i)},setPartnerReferenceCode:async({commit:s},i)=>{s("SET_CUSTOMER_INFORMATION_REQUEST_PARTNER_REFERENCE_CODE",i)},submitSupplierRequestedInformationAnswer:async({commit:s},i)=>{const c=Ba(i.questionAnswered),u="identifier"in i.questionAnswered?i.questionAnswered.identifier:"fallback";return e.submitSupplierRequestedInformationAnswer(i.bookingHash,u,c).then(()=>!0).catch(l=>{if(l.violations?.length)return l.violations.forEach(p=>{if(p.field){const g=p.messageLocalized??p.message??"";It(p.field,g,s)}}),Promise.resolve(!1);throw l})},getCustomerInformationPage:async({commit:s,rootGetters:i},c)=>{const{shoppingCartHashFromUrl:u,referer:l,ticketingBackUrl:p}=c;let g;u&&p?(a.persistTicketingBackUrl(p),g=a.getShoppingCartHashWithOverrideFromUrl(u,l,r)):g=r.getShoppingCartHash();const m=V(s);if(!g)throw new x("/shopping-cart",302);return t.getCustomerInformationPageData(g,i["auth/isLoggedIn"]).then(async E=>{const y=E.shoppingCart;if(!y)throw m("setHasError",!0),S.error({shoppingCartHash:g},"CustomerInformationPage cart is missing"),new x("/cart",302);if(!(y.shoppingCartItems??[]).length)throw m("setHasError",!0),S.error({shoppingCartHash:g},"CustomerInformationPage access with empty cart"),new x("/cart",302);return m("setHasError",!1),s("SET_CUSTOMER_INFORMATION_DATA",E),Promise.resolve(!0)}).catch(E=>{throw S.error({error:E},"CustomerInformationPage get data failed"),E?.status===409&&E?.type?.endsWith(Ua.shoppingCartAlreadyProcessed)?new x(`/confirmation/${g}`,302):new x("/shopping-cart",302)})},validateEmail:async({commit:s},i)=>{s("SET_EMAIL_VALIDATION",void 0);const c=await t.validateCustomerEmail(i);c&&(s("SET_EMAIL_VALIDATION",c),c.isValid||Ne.event("email-validation"))},submitCustomerInformationData:async({state:s,commit:i,rootGetters:c},u)=>{const l=V(i),p=s.customerInformationData?.shoppingCart?.shoppingCartHash??null;return p?(u=Ha(u),t.submitCustomerInformation(p,u,c["context/partnerSession"]).then(()=>!0).catch(g=>{if(g.violations?.length)return g.violations.forEach(m=>{if(m.field){const E=m.messageLocalized??m.message??"";Fa(m.field,E,i),It(m.field,E,i)}}),Promise.resolve(!1);throw g})):(l("setHasError",!0),Promise.resolve(!1))},deleteShoppingCartItemAddon:async({commit:s,rootGetters:i},c)=>{const u=V(s),l=i["customerInformation/shoppingCart"];return o.deleteShoppingCartItemAddon(l.shoppingCartHash,c.shoppingCartItemId,c.addonId,i["context/partnerSession"],i["auth/isLoggedIn"]).then(p=>{p.status&&p.status===Xe.active?(St(p,l),s("SET_SHOPPING_CART",p)):s("SET_SHOPPING_CART",null),u("setHasError",!1)}).catch(()=>{u("setHasError",!0)})},bookShoppingCartItemAddon:async({commit:s,rootGetters:i},c)=>{const u=V(s),l=i["customerInformation/shoppingCart"];return o.bookShoppingCartItemAddon(l.shoppingCartHash,c.shoppingCartItemId,c.addonId,c.count,i["context/partnerSession"],i["auth/isLoggedIn"]).then(p=>{p.status&&p.status===Xe.active?(St(p,l),s("SET_SHOPPING_CART",p)):s("SET_SHOPPING_CART",null),u("setHasError",!1)}).catch(()=>{u("setHasError",!0)})},initiatePayment:async({state:s,rootState:i,commit:c},u)=>{const{paymentMethodIdentifier:l,issuerId:p,recurringDetailReference:g}=u,m=V(c),E=s.customerInformationData?.shoppingCart?.shoppingCartHash??null;return E?t.initiatePaymentRequest(E,l,i.auth?.isLoggedIn,p,g).then(y=>y).catch(y=>{throw y}):(m("setHasError",!0),Promise.resolve(!1))},validateApplePayMerchant:async(s,i)=>t.validateApplePayMerchant(i),getDataLayer:async({commit:s,state:i})=>{const c=i.customerInformationData?.shoppingCart?.shoppingCartHash??null;return c?n.getDataLayer(c).then(u=>(s("SET_DATA_LAYER",u),!0)).catch(()=>(s("SET_DATA_LAYER",null),!1)):!1},redeemCode:async({commit:s,rootGetters:i},c)=>{const u=V(s);try{await t.redeemCodeForShoppingCart(c.shoppingCartHash,c.redeemableCode,i["context/partnerSession"],i["auth/isLoggedIn"])}catch(l){const p=l.status;return p>=400&&p<500&&s("SET_REDEEM_CODE_ERROR",l.titleLocalized),Promise.reject(l)}return t.getCustomerInformationPageData(c.shoppingCartHash,i["auth/isLoggedIn"]).then(async l=>{const p=l.shoppingCart;if(!p)throw u("setHasError",!0),S.error({shoppingCartHash:c.shoppingCartHash},"CustomerInformationPage cart is missing"),new x("/cart",302);if(!(p.shoppingCartItems??[]).length)throw u("setHasError",!0),S.error({shoppingCartHash:c.shoppingCartHash},"CustomerInformationPage access with empty cart"),new x("/cart",302);return u("setHasError",!1),s("SET_CUSTOMER_INFORMATION_DATA",l),Promise.resolve(!0)}).catch(l=>{throw S.error({error:l},"CustomerInformationPage get data failed"),new x("/shopping-cart",302)})},deleteRedeemableCode:async({commit:s,rootGetters:i},c)=>{const u=i["context/partnerSession"],l=V(s);return t.deleteRedeemableCodeFromShoppingCart(c.shoppingCartHash,c.redeemableCode,u,i["auth/isLoggedIn"]).then(()=>t.getCustomerInformationPageData(c.shoppingCartHash,i["auth/isLoggedIn"])).then(p=>(p.shoppingCart?.shoppingCartItems??[]).length?(l("setHasError",!1),s("SET_CUSTOMER_INFORMATION_DATA",p),Promise.resolve(!0)):(l("setHasError",!0),S.error({shoppingCartHash:c.shoppingCartHash},"CustomerInformationPage access with empty cart"),Promise.resolve(!1))).catch(p=>{if(S.error({error:p},"CustomerInformationPage get data failed"),p?.status<400&&p?.status>=500)throw new x("/shopping-cart",302)})}}}const $a={customerInformationData:e=>e.customerInformationData,emailValidation:e=>e.emailValidation,isLoading:e=>e.isLoading,shoppingCart:e=>e.customerInformationData?.shoppingCart,customerInformationFormErrors:e=>e.customerInformationFormErrors,supplierRequestedInformationFormErrors:e=>e.supplierRequestedInformationFormErrors,dataLayer:e=>e.dataLayer,isRedeemingCode:e=>e.isRedeemingCode,isDeletingCode:e=>e.isDeletingCode,redeemCodeError:e=>e.redeemCodeError,customerInformationRequest:e=>e.customerInformationRequest},Wa={SET_CUSTOMER_INFORMATION_DATA(e,t){e.customerInformationData=t},SET_SHOPPING_CART(e,t){e.customerInformationData&&(e.customerInformationData.shoppingCart=t)},SET_IS_LOADING(e,t){e.isLoading=t},SET_EMAIL_VALIDATION(e,t){e.emailValidation=t},SET_CUSTOMER_INFORMATION_FORM_ERROR(e,t){switch(t.addressType){case"billingDetails":case"travelerDetails":e.customerInformationFormErrors[t.addressType][t.label]=t.value;break;case"paymentDetails":e.customerInformationFormErrors[t.addressType][t.label]=t.value}},SET_SUPPLIER_REQUESTED_INFORMATION_FORM_ERRORS(e,t){e.supplierRequestedInformationFormErrors=t},SET_SUPPLIER_REQUESTED_INFORMATION_FORM_ERROR(e,t){const o=t.bookingIndex??0,r=e.supplierRequestedInformationFormErrors[o];switch(t.type){case be.bookingLevel:{const a=t.itemIndex!==void 0?r?.bookingLevel[t.itemIndex]:r?.bookingLevel?.find(n=>n.identifier===t.identifier);a&&(a.error={...a.error,...t.error});break}case be.travelerLevel:{const a=t.itemIndex!==void 0?r?.travelerLevel[t.itemIndex]:r?.travelerLevel?.find(n=>n.identifier===t.identifier);a&&t.travelerIndex!==void 0&&a.errors.splice(t.travelerIndex,1,{...a.errors[t.travelerIndex],...t.error});break}case be.fallback:{const a=r?.fallback;a&&(a.error=t.error);break}}},SET_DATA_LAYER(e,t){e.dataLayer=t},SET_IS_DELETING_CODE(e,t){e.isDeletingCode=t},SET_IS_REDEEMING_CODE(e,t){e.isRedeemingCode=t},SET_REDEEM_CODE_ERROR(e,t){e.redeemCodeError=t},SET_CUSTOMER_INFORMATION_REQUEST_CUSTOMER_BILLING(e,t){e.customerInformationRequest.customerBillingInformation=t},SET_CUSTOMER_INFORMATION_REQUEST_SUPPLIER_REQUESTED_INFORMATION(e,t){e.customerInformationRequest.supplierRequestedInformationPerBooking=t},SET_CUSTOMER_INFORMATION_REQUEST_NEWSLETTER(e,t){e.customerInformationRequest.newsletter=t},SET_CUSTOMER_INFORMATION_REQUEST_PARTNER_REFERENCE_CODE(e,t){e.customerInformationRequest={...e.customerInformationRequest,partnerReferenceCode:t}},SET_CUSTOMER_INFORMATION_BILLING_DETAILS(e,t){e.customerInformationRequest={...e.customerInformationRequest,customerBillingInformation:{...e.customerInformationRequest.customerBillingInformation,billingDetails:t,sameTravelerAsBillingDetails:!0,travelerDetails:void 0}}}};function $(e){return t=>{const o=t?.response?.status??null;throw(o===404||o===409)&&e&&S.error({error:t},e),t?.response?.data?t?.response?.data:t}}const Ya=10*1e3;class Ka{constructor(t){R(this,"_httpClient");this._httpClient=t}updateSupplierRequestedInformationForBooking(t,o){return this._httpClient.post(new O("travelers-api.booking-supplier-requested-information",{pathParams:{bookingHash:t}}),o).then(()=>{}).catch($(`Error submitting customer information data for booking ${t}`))}getCustomerInformationPageData(t,o){return this._httpClient.get(new O("travelers-api.customer-information-page",{pathParams:{shoppingCartHash:t}}),{needsAuth:o,timeout:Ya}).then(r=>{if(Y(r?.data?.customerInformationPage))throw new Error("CustomerInformationPageData is empty");return r.data.customerInformationPage}).catch($(`Error fetching customer information page for cart ${t}`))}async validateCustomerEmail(t){try{const o=await this._httpClient.post(new O("travelers-api.customer-information-validate-email"),{email:t,source:"CustomerBillingInformationPage"});if(o.data)return{isValid:o.data.isValid,suggestions:o.data.suggestion?[o.data.suggestion]:[]}}catch(o){S.error({error:o},"Error validating email in customer information page")}}submitCustomerInformation(t,o,r){return this._httpClient.post(new O("travelers-api.customer-information-page",{pathParams:{shoppingCartHash:t}}),o,{headers:{"partner-hash":r.partnerHash,"partner-cmp":r.cmp,"partner-visitor-id":r.partnerVisitorId}}).then(()=>{}).catch($(`Error submitting customer information data for cart ${t}`))}initiatePaymentRequest(t,o,r,a,n){return this._httpClient.post(new O("travelers-api.carts-initiate-payment",{pathParams:{shoppingCartHash:t,paymentMethodIdentifier:o}}),{issuerId:a,recurringDetailReference:n},{needsAuth:r,timeout:1e4}).then(s=>s?.data?.paymentParams).catch($(`Error initiating payment request with ${o} for cart ${t}`))}validateApplePayMerchant(t){return this._httpClient.post(new O("travelers-api.payment-validate-apple-pay-merchant"),{validationUrl:t}).then(o=>o?.data?.merchantSession).catch($(`Error validating Apple Pay on ${t}`))}redeemCodeForShoppingCart(t,o,r,a){return this._httpClient.post(new O("travelers-api.carts-redeemable-codes",{pathParams:{shoppingCartHash:t}}),{redeemableCode:o},{needsAuth:a,headers:{"partner-hash":r.partnerHash,"partner-cmp":r.cmp,"partner-visitor-id":r.partnerVisitorId}}).then(n=>n.data.shoppingCart).catch($(`Error redeeming code ${o} for shopping cart ${t}`))}deleteRedeemableCodeFromShoppingCart(t,o,r,a){return this._httpClient.delete(new O("travelers-api.carts-redeemable-code",{pathParams:{shoppingCartHash:t,redeemableCode:o}}),{headers:{"partner-hash":r.partnerHash,"partner-cmp":r.cmp,"partner-visitor-id":r.partnerVisitorId},needsAuth:a}).then(n=>n.data.shoppingCart).catch($(`Error deleting redeemable code ${o} from shopping cart ${t}`))}}const Ce="ticketing_set_shopping_cart_hash",za="ticketing_redirection_back_to_merchant",Xa=[/(www\.)?africamuseum\.be/,/(www\.)?leonardointeractivemuseum\.com/,/(www\.)?mostradileonardo\.com/,/(www\.)?davincimuseum\.it/,/(www\.)?infomountbatur\.com/,/(www\.)?brokenships\.com/,/(www\.)?fernsehturm-stuttgart\.de/,/(www\.)?mgst\.net/,/(www\.)?mgs\.hr/,/(www\.)?cuevasdelshams\.com/,/(www\.)?alboreaflamenco\.com/,/(www\.)?berlinstory\.de/,/(www\.)?casadelamemoria\.es/,/obando\.mimundosocial\.com/,/(www\.)?elephantretirementpark\.com/,/(www\.)?elephantretirementparkphuket\.com/,/(www\.)?strawberryfieldliverpool\.com/,/(www\.)?kamigata\.jp/,/(www\.)?guggenheim-venice\.it/,/(www\.)?escherinhetpaleis\.nl/,/(www\.)?torredeilamberti\.it/,/(www\.)?funicolarediverona\.it/,/(www\.)?archaeology-travel\.com/,/(www\.)?lovingnewyork\.de/,/(www\.)?loving-newyork\.com/,/(www\.)?museodemedici\.com/,/(www\.)?myspecialvenice\.com/,/(www\.)?davincimuseum\.it/,/(www\.)?museodellamusica\.com/,/(www\.)?artemusicavenezia\.it/,/(www\.)?vivilerive\.com/,/(www\.)?positanoscooter\.com/,/(www\.)?flamencomalaga\.com/,/(www\.)?isolelagomaggiore\.com/,/(www\.)?tucsonbotanical\.org/,/(www\.)?picoverde\.it/,/(www\.)?museonicolis\.com/,/(www\.)?villafoscarini\.it/,/(www\.)?museodellacalzatura\.it/,/(www\.)?tucsonbotanical\.org/,/(www\.)?ceronudos\.com/,/(www\.)?biketaxi\.de/,/(www\.)?picoverde\.it/,/(www\.)?flamencocultural\.com/,/(www\.)?flamencolacantaora\.com/,/(www\.)?barakasalaflamenca\.com/,/(tsb\.)?.clickfunnels\.com\/museo-nicolis-interazione1656062823051/,/(www\.)?museopadovaebraica\.it/,/(www\.)?streaming\.myaudi\.it/,/(www\.)?ambrosiana\.it/,/(www\.)?scuolasangiovanni\.it/,/(www\.)?ilsoave\.com/,/(www\.)?soavemultiverso\.com/,/(www\.)?soaveversus\.com/,/(www\.)?hartiescableway\.co\.za/,/(www\.)?theredbicycle\.org/,/(www\.)?ccvalg\.pt/,/(www\.)?hurghadaexcursionsonline\.com/,/(www\.)?creaturedigomma\.com/,/(www\.)?micaseta\.com/,/(www\.)?psmuseum\.it/,/(www\.)?dunacruises\.com/,/(www\.)?dunacruises\.test/,/(www\.)?ivirtuositaliani\.eu/,/(www\.)?flamenqueria\.es/,/(www\.)?bubbleslice\.pt/,/(www\.)?linternaeventos\.com/,/(www\.)?charismaticmountain\.com/,/(www\.)?museomaschere\.it/,/(www\.)?museodellemaschere\.it/,/(www\.)?vasamuseet\.se/,/(www\.)?vrak\.se/,/(www\.)?vrakmuseum\.se/,/(www\.)?staging\.vrakmuseum\.se/,/(www\.)?fuerteventurafullexperience\.com/,/(www\.)?gametour\.es/,/(www\.)?igattipiubellidelmondo\.it/,/(www\.)?fuerteventuraquad\.com/,/(www\.)?scotlandscanyons\.com/,/(www\.)?pickeringsgin\.com/,/(www\.)?sharkcagediving\.co\.za/,/(www\.)?thamesriversightseeing\.com/,/(www\.)?cairoexcursionsonline\.com/,/(www\.)?hurghadaexcursionsonline\.com/,/(www\.)?sharmexcursionsonline\.com/,/(www\.)?tesorosangennaro\.it/,/(www\.)?knysnacharters\.com/,/(www\.)?aventuratoursalou\.com/,/(www\.)?montilessini\.com/,/(www\.)?pozzodellacava\.it/,/(www\.)?indigotickets\.com/,/(www\.)?quickcultureinsider\.com/,/(www\.)?quickculture\.com/,/(www\.)?dezerlandpark\.com/,/(www\.)?waxmuseumudaipur\.com/,/(www\.)?onlocationtours\.com/,/(www\.)?sevillafood\.com/,/(www\.)?naturaxtremetenerife\.com/,/(www\.)?telefericojardimbotanico\.com/,/(www\.)?querinistampalia\.org/,/(www\.)?museitreviso\.it/,/(www\.)?techsalt\.pt/,/(www\.)?flamencopalaudalmases\.com/,/(www\.)?salsamia\.com/,/(www\.)?mangos\.com/,/(www\.)?nuraghelosa\.net/,/(www\.)?internationaldriveorlando\.smtusa\.com/,/(www\.)?internationaldriveorlando\.com/,/(www\.)?iridetrolley\.com/,/(www\.)?viajesparejatours\.com/,/(www\.)?jardinalbarda\.com/,/(www\.)?museonivola\.it/,/(www\.)?zico-tours\.com/,/(www\.)?skyoftenerife\.com/,/(www\.)?ojovolador\.com/,/(www\.)?tossasub\.com/,/(www\.)?barmanonline\.it/,/(www\.)?bosphorustour\.com/,/(www\.)?myaudi\.it/,/(www\.)?touristtram\.nl/,/(www\.)?chocolatekingdom\.com/,/(www\.)?sirilaktours\.com/,/(www\.)?urlaub-sr-lanka\.info/,/(www\.)?split\.muzejiluzija\.com/,/(www\.)?myloveitaly\.com/,/(www\.)?rome-shorexcursions\.com/,/(www\.)?mymaremma\.com/,/(www\.)?frenchriviera-services\.com/,/(www\.)?sirilaktours\.com/,/(www\.)?seerendipitytours\.com/,/(www\.)?seaadventureexcursions\.com/,/(www\.)?redhistorymuseum\.com/,/(www\.)?tmnt\.hr/,/(www\.)?ranchito\.com/,/(www\.)?cuevasdegenova\.com/,/(www\.)?teatroflamencotriana\.com/,/(www\.)?lyonbiketour\.com/,/(www\.)?salaflamenca-almoraima\.com/,/(www\.)?sunsetbosphorus\.com/,/(www\.)?sunsetcruiseistanbul\.com/,/(www\.)?lunchcruiseistanbul\.com/,/(www\.)?cowgirl\.net/,/(www\.)?mangos\.com/,/(www\.)?naplesgrandtour\.com/,/(www\.)?torciano\.com/,/(www\.)?glaesernemanufaktur\.de/,/(www\.)?arnoboat\.com/,/(www\.)?hopon\.no/,/(www\.)?haciendalarekompensa\.es/,/(www\.)?tourstoniagarafalls\.com/,/(www\.)?tangoporteno\.com.ar/,/(www\.)?hptravel\.it/,/(www\.)?hvarboating\.com/,/(www\.)?balidiving\.com/,/(www\.)?fadonabaixa\.com/,/(www\.)?babusafaris\.com/,/(www\.)?montenegrosubmarine\.me/,/(www\.)?mfk-berlin\.de/,/(www\.)?mfk-frankfurt\.de/,/(www\.)?graylineorlando\.com/,/(www\.)?palazzoprigionivenezia\.com/,/(www\.)?piazza-sanmarco\.eu/,/(www\.)?authenticvenice\.tours/,/(www\.)?gondola-ride\.com/,/(www\.)?senegal-shuttle\.com/,/(www\.)?palmetumtenerife\.es/,/(www\.)?kornatiexcursion\.com/,/(www\.)?myoldtownusa\.com/,/(www\.)?niagarafallshilton\.com/,/(www\.)?tinoboats\.com/,/(www\.)?maxactionarena\.com/,/(www\.)?venicecitytours\.it/,/(www\.)?golfoparadiso\.it/,/(www\.)?adventurezone\.co\.za/,/(www\.)?hovm\.nl/,/(www\.)?madboatparty\.es/,/(www\.)?acasadofado\.pt/,/(www\.)?americanwritersmuseum\.org/,/(www\.)?navitremiti\.com/,/(www\.)?maderotango\.com/,/(www\.)?maggiorleggerotour\.com/,/(www\.)?gostilje\.com/,/maggiorleggero\.sitengo\.it/,/(www\.)?maderotangoiguazu\.com/,/(www\.)?maderotango\.com\.ar/,/(www\.)?adventurezone\.co\.za/,/(www\.)?mongolfiereitalia\.com/,/(www\.)?mongolfierefirenze\.com/,/(www\.)?ballooninginitaly\.it/,/(www\.)?balloontuscany\.com/,/(www\.)?hornblowermalta\.com/,/(www\.)?himalayastrek\.com/,/(www\.)?rentalcarpositano\.com/,/(www\.)?alpineairadventures\.com/,/(www\.)?portodefados\.com/,/(www\.)?famaraiso\.es/,/(www\.)?acasadofado\.com/,/(www\.)?acasadofado\.pt/,/(www\.)?zuramaltaparty\.com/,/(www\.)?audievents.volkswagengroup\.it/,/(www\.)?mongolfiereitalia\.com/,/(www\.)?mongolfierefirenze\.com/,/(www\.)?ballooninginitaly\.it/,/(www\.)?balloontuscany\.com/,/(www\.)?egadinavigazione\.it/,/(www\.)?scubacarolina\.com/,/(www\.)?flamencolacantaora\.com/,/(www\.)?toursguatape\.com/,/(www\.)?blisschapel\.com/,/(www\.)?top10toursinmedellin\.com/,/(www\.)?talvi-tours\.hr/,/(www\.)?mirjana-rastoke\.com/,/(www\.)?rastoke-active\.com/,/(www\.)?palapa\.tours/,/(www\.)?lapiedradelpenol\.com/,/(www\.)?nauticajasminepalau\.com/,/(www\.)?bottegatorciano\.com/,/(www\.)?flytowine\.com/,/(www\.)?rudasbistro\.hu/,/(www\.)?insula360\.com/,/(www\.)?eltemplodelflamenco\.com/,/(www\.)?tablaoalvarezquintero\.com/,/(www\.)?911memorial\.org/,/(www\.)?teatroastorpiazzolla\.com/,/(www\.)?tangocarlosgardel\.com/,/(www\.)?ninnaji\.jp/,/(www\.)?midway\.org/,/(www\.)?discoveringmedellin\.com/,/(www\.)?ecoterranicaragua\.com/,/(www\.)?ceresrail\.co\.za/,/(www\.)?tenikwa\.com/,/(www\.)?maltauncovered\.com/,/(www\.)?canyoning-cetina\.com/,/(www\.)?sienawards\.com/,/(festival\.)?sienawards\.com/,/(app-festival\.)?sienawards\.com/,/(www\.)?kurtsafari\.com/,/(www\.)?teaceremonykyoto\.com/,/(www\.)?drum-tao\.com/,/(www\.)?south-tours\.com/,/(www\.)?7travel\.at/,/(www\.)?palazzoboncompagni\.it/,/(www\.)?grandcanyonwesternranch\.com/,/(www\.)?cityoflondontours\.com/,/(www\.)?jacktheripperlondontours\.com/,/(www\.)?xtremeninjachallenge\.com/,/(www\.)?sentirflamenco\.com/,/(www\.)?lanzafly\.es/,/(www\.)?timetravel-vienna\.at/,/(www\.)?casadaguitarra\.pt/,/(www\.)?mostraprimamonnalisa\.com/,/(www\.)?ticketing.getyourguide\.com/,/(www\.)?esbnyc\.com/,/esbnycdev\.prod\.acquia-sites\.com/,/esbnycstg\.prod\.acquia-sites\.com/,/esbnycstg1\.prod\.acquia-sites\.com/,/dev-esb-nyc\.pantheonsite\.io/,/yourguide-esb-nyc\.pantheonsite\.io/,/tickets-esb-nyc\.pantheonsite\.io/,/new-ticketing-attraction\.000webhostapp\.com/,/demo\.gyg\.ticketing\.run/,/localhost:8080/,/localhost:3000/],Za="paymentResult",qa="shopping_cart_hash";class Qa{constructor(t){R(this,"_cookieManager");this._cookieManager=t}getTicketingBackUrl(){return this._cookieManager.get("ticketingBackUrl")||null}deleteTicketingBackUrlCookie(){return this._cookieManager.expire("ticketingBackUrl")}persistTicketingBackUrl(t){t&&this.isUrlAllowedForTicketing(t)&&this._cookieManager.set("ticketingBackUrl",t,{httpOnly:!1})}buildTicketingRedirectionBackUrl(t,o){const r=this.getTicketingBackUrl();if(!r||!this.isUrlAllowedForTicketing(r))return null;if(t===Xe.processed){const a=new URL(r);return a.searchParams.set(Za,"success"),a.searchParams.set(qa,o),a.toString()}return null}getShoppingCartHashWithOverrideFromUrl(t,o,r){return t&&this.isRefererAllowedToSetShoppingCartHash(o)?(r.persistShoppingCartHash(t),t):r.getShoppingCartHash()}isUrlAllowedForTicketing(t){if(!t)return!1;try{const o=new URL(t);return o.protocol!=="http:"&&o.protocol!=="https:"?!1:Xa.some(r=>r.test(o.host))}catch{return!1}}isRefererAllowedToSetShoppingCartHash(t){if(!t)return U.increment(Ce,{reason:"refererUndefined",allowed:!1}),!1;try{new URL(t)}catch{return U.increment(Ce,{referer:t,reason:"parseException",allowed:!1}),!1}const o=new URL(t);return this.isUrlAllowedForTicketing(t)?(U.increment(Ce,{referer:o.origin,path:o.pathname,allowed:!0}),!0):(U.increment(Ce,{referer:o.origin,path:o.pathname,reason:"refererNotInAllowList",allowed:!1}),!1)}static redirectBackWithPaymentStatus(t){return U.increment(za,{url:t}),Promise.reject(new x(t,302))}}class Ja{constructor(t){R(this,"_httpClient");this._httpClient=t}getDataLayer(t){return this._httpClient.get(new O("travelers-api.data-layer",{pathParams:{shoppingCartHash:t}})).then(o=>o.data.dataLayer).catch(this.createErrorHandler(`Error fetching data layer for cart ${t}`))}createErrorHandler(t){return o=>{throw(o?.response?.status??null)===404&&t&&S.error({error:o},t),o?.response?.data?o?.response?.data:o}}}class ja{constructor(t){R(this,"_httpClient");this._httpClient=t}async getCheckoutPageData(t,o=!1){try{return(await this._httpClient.get(new O("travelers-api.checkout-page",{pathParams:{shoppingCartHash:t}}),{needsAuth:o})).data.checkoutData}catch{throw $(`Error getting checkout page data for shopping cart ${t}`)}}submitSupplierRequestedInformationAnswer(t,o,r){return this._httpClient.post(new O("travelers-api.booking-supplier-requested-information-answer",{pathParams:{bookingHash:t,questionIdentifier:o}}),r).then(()=>{}).catch($(`Error submitting answer of type ${o} for booking ${t}`))}}const en=()=>({customerInformationData:null,isLoading:!1,customerInformationFormErrors:{billingDetails:{fullName:null,firstName:null,lastName:null,email:null,phoneNumber:null},travelerDetails:{fullName:null,firstName:null,lastName:null,email:null,phoneNumber:null},paymentDetails:{paymentMethodIdentifier:null,paymentMethodIssuer:null,paymentMethodIdentifierField:null}},supplierRequestedInformationFormErrors:[],dataLayer:null,isRedeemingCode:!1,isDeletingCode:!1,redeemCodeError:"",customerInformationRequest:{newsletter:{subscribeToNewsletter:null,softOptInEligible:!1}}});function tn(e,t){return{namespaced:!0,state:en,getters:$a,mutations:Wa,actions:Va(new ja(e),new Ka(e),new Co(e),new vo(e,t),new Qa(t),new Ja(e))}}class on{constructor(t){R(this,"_httpClient");this._httpClient=t}async fetchContentHub(t){return t?this._httpClient.get(new O("travelers-api.companion-content-content-hub",{searchString:`?locationId=${t}`})).then(o=>o.data.contentHub).catch(o=>(S.error(o,"Failed to fetch Content Hub."),null)):null}async fetchGenericCompanionContent(t,o){return!t&&!o?null:this._httpClient.get(new O(`travelers-api.companion-content-${o}`,{searchString:`?locationId=${t}`})).then(r=>r.data.content).catch(r=>(S.error(r,`Failed to fetch Companion Content: ${o}.`),null))}}const rn=()=>({contentHub:null}),an={contentHub:e=>e.contentHub};function nn(e){return{getContentHub:async({commit:t},o)=>{const r=await e.fetchContentHub(o);t("SET_CONTENT_HUB",r)}}}const sn={SET_CONTENT_HUB(e,t){e.contentHub=t}};function Kt(e){return{namespaced:!0,state:rn,getters:an,actions:nn(new on(e)),mutations:sn}}const cn="v104434.3adc0cb",ln={tag:cn},un="testing",dn={api:un},ce=null,pn=typeof process=="object"&&!1;function mn(e){const t=e.slice(2)?.[0];let o=[];return t?.includes("applications")&&(o=t.split("=")[1].split(",")),o}let Qe;const P=(ce?ce.NODE_ENV:"production")||"production",At=ce?ce.ENDPOINTS_OVERRIDES?ce.ENDPOINTS_OVERRIDES.split(","):[]:[];if(pn){const e=ce,t=e.PORT||3e3,o=e.PROXY_PORT,r=e.SENTRY_DSN||null,a=e.SENTRY_BROWSER_DSN||null,n=e.DRONE&&e.DRONE==="true"||!1,s=e.DEV_SERVER||!1,i=!!e.GYGDEV_ENV||!1,c=e?.GETTEXT_UPDATE_FREQUENCY;Qe={env:P,isProduction:P==="production"||P==="prod",isDevelopment:P==="development"||P==="dev",isTesting:P==="testing"||P==="test",isContinuousDelivery:P==="ci"||n,isVitePreview:!!e.VITE_PREVIEW||!1,testingCluster:e.CLUSTER,enableDebugRun:!!e.ENABLE_DEBUG_RUN,enableAllLanguages:!!e.ENABLE_ALL_LANGUAGES,enableLocaleRedirect:!!e.ENABLE_LOCALE_REDIRECT,enableVerboseLogging:!!e.ENABLE_VERBOSE_LOGGING||!1,tfeApplications:mn(["/opt/hostedtoolcache/node/20.6.0/x64/bin/node","/runner/_work/traveler-frontend/traveler-frontend/apps/locations/node_modules/@tfe/vite-core-vue3/bin/tfe-vite-build.ts","--css-file-for-assets-cdn-url","--gettext","--client","--server"]),port:t,proxyPort:o,sentryDsn:r,sentryBrowserDsn:a,releaseTag:ln.tag,testingApi:dn.api,devServer:s,isUsingGygdev:i,gettextUpdateFrequency:c,endpointsOverrides:At,toString(){return`
          port: ${t}
          environment: "${P}"
        `}}}else Qe={isProduction:P==="production"||P==="prod",isDevelopment:P==="development"||P==="dev",isTesting:P==="testing"||P==="test",tfeApplications:[],env:P,endpointsOverrides:At};const Ke=Qe,yt={COUNTRY:"x-gyg-geoip-country",COUNTRY_NAME:"x-gyg-geoip-country-name",CITY:"x-gyg-geoip-city",REGION:"x-gyg-geoip-region",TIMEZONE:"x-gyg-time-zone"};class gn{constructor(t){R(this,"_httpClient");R(this,"_requestOptions");R(this,"_endpointOptions");R(this,"_logTags");this._httpClient=t,this._requestOptions={headers:{}},this._endpointOptions={searchString:"",pathParams:{}}}addDefaultHeaders(t){const{geoIpData:o,partnerCmp:r}=t;o.city&&(this._requestOptions.headers[yt.CITY]=o.city),r&&(this._requestOptions.headers["x-gyg-partner-cmp"]=r),this.addClientTimezoneHeader()}addClientTimezoneHeader(){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;t&&(this._requestOptions.headers[yt.TIMEZONE]=t)}setRequestOptions(t){this._requestOptions=t}setEndpointOptions(t){this._endpointOptions=t}setLogTags(t){this._logTags=t}async fetchPage({pageId:t,isTabletDevice:o,userAgent:r}){try{const a=Ae({},this._requestOptions,{headers:{...r&&{"user-agent":r},...o&&{"visitor-platform":"desktop"}}}),n=Ae({},this._endpointOptions,{pathParams:{pageId:t}});return(await this._httpClient.get(new O("travelers-api.pages-sdui",n),a)).data}catch(a){const s=`[SDUI] Failed to fetch page: ${t?.split("?")[0]}`;throw S.error({...this._logTags,error:a},s),new Error(`check logs under "${s}" for more details`)}}async fetchLazyBlock(t,o,r){try{const a=Ae({},this._endpointOptions,{pathParams:{route:t}}),n=r?.experiments,s=ct(n?{experiments:n}:{});return(await this._httpClient.post(new O("travelers-api.blocks-sdui",{...a,searchString:s?`?${s}`:""}),{payload:o},this._requestOptions)).data}catch(a){const n=`[SDUI] Failed to fetch lazy block, route: ${t}`;throw S.error({...this._logTags,error:a,route:t,payload:o},n),new Error(`${a.message}: check logs under "${n}" for more details`)}}async fetchReloadableBlock(t,o,r,a){try{const n=Ae({},this._endpointOptions,{pathParams:{route:t}}),s=a?.experiments,i=ct(s?{experiments:s}:{}),c=new O("travelers-api.blocks-sdui",{...n,searchString:i?`?${i}`:""});return(await this._httpClient.post(c,{events:o,payload:r},this._requestOptions)).data}catch(n){const s=`[SDUI] Failed to fetch blocks from reloadable-block, route: ${t}`;throw S.error({...this._logTags,error:n,route:t,events:o,context:r},s),new Error(`${n.message}: check logs under "${s}" for more details`)}}}const hc={client:"tfe",screenType:"sdui"},wn=()=>({tags:{pageId:void 0,container:"serverDrivenUI",client:"tfe",screenType:"sdui"},layout:void 0,pageError:void 0,onViewTrackingEvent:void 0,additionalTrackingEvents:void 0,loading:{}}),fn={layout:e=>e.layout,logTags:e=>e.tags,metricTags:e=>{const{container:t,client:o}=e.tags;return{container:t,client:o}},loading:e=>e.loading,pageError:e=>e.pageError,onViewTrackingEvent:e=>e.onViewTrackingEvent,additionalTrackingEvents:e=>e.additionalTrackingEvents},En={SET_LAYOUT(e,t){e.layout=t},UPDATE_LOADING(e,t){e.loading={...e.loading,...t}},SET_PAGE_ERROR(e,t){e.pageError=t},SET_TAGS(e,t){const{pageId:o,container:r,queryParams:a}=t;e.tags.pageId=o,e.tags.container=r,e.tags.queryParams=a},SET_PAGE_VIEW_TRACKING_EVENT(e,t){e.onViewTrackingEvent=t},SET_PAGE_ADDITIONAL_TRACKING_EVENTS(e,t){e.additionalTrackingEvents=t}};function hn(e){return{namespaced:!0,state:wn,actions:Tn(new gn(e)),getters:fn,mutations:En}}function Tn(e){return{initPage:async({getters:t,commit:o,rootState:r},a)=>{e.setLogTags(t.logTags);const n=r.context.isTabletDevice,s=r.context.userAgent,i=r.context.geoIpData,c=r.context.partnerSession?.cmp;e.addDefaultHeaders({geoIpData:i,partnerCmp:c});const u=await e.fetchPage({pageId:a,isTabletDevice:n,userAgent:s});return o("SET_LAYOUT",u.layout),o("SET_PAGE_VIEW_TRACKING_EVENT",u.onViewTracking?.event),o("SET_PAGE_ADDITIONAL_TRACKING_EVENTS",u.additionalTrackingEvents),u},fetchLazyBlock:async({getters:t,rootState:o},{route:r,payload:a,queryParameters:n})=>{e.setLogTags(t.logTags);const s=o.context.geoIpData,i=o.context.partnerSession?.cmp;return e.addDefaultHeaders({geoIpData:s,partnerCmp:i}),await e.fetchLazyBlock(r,a,n)},fetchReloadableBlock:async({getters:t,commit:o,rootState:r},{route:a,memorisedEvents:n,context:s,lastEvent:i,queryParameters:c})=>{e.setLogTags(t.logTags);const u=i.type,l=r.context.geoIpData,p=r.context.partnerSession?.cmp;e.addDefaultHeaders({geoIpData:l,partnerCmp:p});try{return o("UPDATE_LOADING",{[u]:!0}),await e.fetchReloadableBlock(a,n,s,c)}finally{o("UPDATE_LOADING",{[u]:!1})}},setPageError:({commit:t},o)=>{t("SET_PAGE_ERROR",o)},setTags:({state:t,commit:o},r)=>{const{pageId:a,container:n,queryParams:s}=r,i={pageId:a||t.tags.pageId,container:n||t.tags.container,queryParams:s||t.tags.queryParams};o("SET_TAGS",i)},setSduiApiServiceOptions:(t,{requestOptions:o,endpointOptions:r})=>{o&&e.setRequestOptions(o),r&&e.setEndpointOptions(r)}}}const _n=()=>({hasError:!1,showModal:!1,dataLayer:{},trackingData:{},googleTagManagerId:"",googleMapsAPIKey:"",googleOneTapID:""}),In=(e,t,o,r)=>({account:Lo(),auth:oa(e),availability:Oo(),bundles:Do(t),category:bo(e),communicationPreferences:No(e),communicationsSubscription:Po(e),companionContent:Kt(e),context:ko(e,t),customerInformation:tn(e,t),customer:xo(e),downloadApp:Uo(e),gettext:Mo(r),googleMaps:ha(),location:ya(e,t),locationExperiments:Ca(),loyaltyProgram:Fo(e),newsletterSignup:Ho(e),notifications:Go(),partnerCustomizations:ga(e),promotions:Bo(e,t),sdui:hn(e),search:Vo(e),incentives:$o(e),topLevelSearch:Wo(e),viasat:xa(e,t,o),webToApp:Yo(e),wishlist:Ko(e)}),Sn=()=>({isLoading:!0,reviews:[],activityId:null,keywords:[],keywordsSearchTerms:[],totalReviews:0,currentOffset:0,hasRequestError:!1,sessionLanguage:"",category:"",sort:"recommended",rating:[],reviewsLocale:"",searchTerm:"",hasBeenCalled:!1,searchType:"searchBar",preloadedReviews:void 0});var T=(e=>(e.SET_OFFSET="SET_OFFSET",e.SET_REVIEWS="SET_REVIEWS",e.SET_ACTIVITY="SET_ACTIVITY",e.SET_TOTAL_REVIEWS="SET_TOTAL_REVIEWS",e.SET_KEYWORDS="SET_KEYWORDS",e.SET_LOADING_STATE="SET_LOADING_STATE",e.SET_LOADING_ERROR="SET_LOADING_ERROR",e.SET_REVIEW_HELPFUL="SET_REVIEW_HELPFUL",e.SET_SESSION_LANGUAGE="SET_SESSION_LANGUAGE",e.SET_CATEGORY="SET_CATEGORY",e.SET_REVIEW_SORTING="SET_REVIEW_SORTING",e.SET_REVIEWS_LOCALE="SET_REVIEWS_LOCALE",e.SET_TRANSLATION_KEY="SET_TRANSLATION_KEY",e.SET_SEARCH_TERM="SET_SEARCH_TERM",e.SET_SEARCH_TYPE="SET_SEARCH_TYPE",e.SET_KEYWORDS_SEARCH="SET_KEYWORDS_SEARCH",e.SET_RATING_FILTER="SET_RATING_FILTER",e.SET_PRELOADED_REVIEWS="SET_PRELOADED_REVIEWS",e.UPDATE_REVIEW="UPDATE_REVIEW",e.UPDATE_REVIEWS="UPDATE_REVIEWS",e.HAS_BEEN_CALLED="HAS_BEEN_CALLED",e))(T||{});const Je={REVIEWS_FETCH_LIMIT:3,REVIEW_SHOW_ORIGINAL:"REVIEW_SHOW_ORIGINAL",REVIEW_SHOW_TRANSLATED:"REVIEW_SHOW_TRANSLATED",USER_INPUT_INITIAL_VALUE:"",SORT_DIRECTION_DEFAULT:"desc",SORT_DIRECTION_ALT:"asc"};function An(e){return{setPaginationOffset:({commit:t},o)=>{t(T.SET_OFFSET,o)},setReviewKeywords:({commit:t},o)=>{t(T.SET_KEYWORDS,o)},setActivity:({commit:t},o)=>{t(T.SET_ACTIVITY,o)},setSessionLanguage:({commit:t},o)=>{t(T.SET_SESSION_LANGUAGE,o)},updateReview:({commit:t},o)=>{t(T.UPDATE_REVIEW,o)},swapReviewMessages:({dispatch:t},{review:o,order:r=""})=>{const a=r===Je.REVIEW_SHOW_ORIGINAL?o.originalMessage:o.translatedMessage,n={...o,...a};t("updateReview",n)},populateReviews:({commit:t,rootState:o},r)=>{const{reviews:a,totalCount:n,keywords:s}=r;if(Array.isArray(a)&&a.length){const i=a.length;t(T.SET_OFFSET,i),t(T.SET_TOTAL_REVIEWS,n),t(T.SET_LOADING_ERROR,!1),t(T.SET_REVIEWS,a),t(T.SET_PRELOADED_REVIEWS,a)}if(s){let i;o.context.isMobileDevice?i=te(o,lt,"B")?s.withoutSentiment:te(o,lt,"C")?s.withSentiment:[]:i=te(o,ut,"B")?s.withoutSentiment:te(o,ut,"C")?s.withSentiment:[],t(T.SET_KEYWORDS,Array.isArray(i)?i:[])}t(T.SET_LOADING_STATE,!1)},fetchReviews:async({rootState:t,state:o,commit:r})=>{const a=te(t,zo,"B")?6:3,{currentOffset:n,activityId:s,category:i,sort:c,rating:u,sessionLanguage:l,searchTerm:p,searchType:g,keywordsSearchTerms:m}=o;r(T.SET_LOADING_STATE,!0);let E;switch(g){case"searchBar":E=p,r(T.SET_KEYWORDS_SEARCH,[]);break;case"keywordSearch":E=m.map(y=>y.keyword).join(","),r(T.SET_SEARCH_TERM,"")}try{const y=await e.fetchReviews({activityId:s,locale:l,offset:n,limit:a,category:i,sort:c,rating:u,searchTerm:E}),{reviews:w,pagination:f,totalCount:C}=y.data;if(Array.isArray(w)&&w.length||i||c||p||u?.length){const Fe=f.offset+w.length,He=n>0?T.UPDATE_REVIEWS:T.SET_REVIEWS;r(T.SET_OFFSET,Fe),r(T.SET_TOTAL_REVIEWS,C),r(T.SET_LOADING_ERROR,!1),r(He,w)}}catch{r(T.SET_LOADING_ERROR,!0)}r(T.SET_LOADING_STATE,!1)},translateReview:async({dispatch:t},{review:o,targetLanguage:r})=>{if(o.translatedMessage){o.translatedMessage.message!==o.message&&t("swapReviewMessages",{review:o,order:Je.REVIEW_SHOW_TRANSLATED});return}t("updateReview",{...o,isLoading:!0,hasTranslationError:!1});try{const a=await e.translateReview(o.id,r);if(!a.data){t("updateReview",{...o,isLoading:!1,hasTranslationError:!1});return}const{message:n,title:s}=a.data,i={title:s,message:n},c={message:o.message,title:o.title},u={...o,...i,translatedMessage:i,originalMessage:c,isLoading:!1,hasTranslationError:!1};t("updateReview",u)}catch{t("updateReview",{...o,isLoading:!1,hasTranslationError:!0})}},markReviewHelpful:({dispatch:t},o)=>{t("updateReview",{...o,isHelpful:!0}),e.markReviewHelpful(o.id).catch(()=>{t("updateReview",{...o,isHelpful:!1,hasError:!0})})},clearReviewTranslationError:({dispatch:t},o)=>{t("updateReview",{...o,hasTranslationError:!1})},applyFilter:({dispatch:t,commit:o},r)=>{t("setPaginationOffset",0),o(T.SET_CATEGORY,r)},applyRatingFilter:({dispatch:t,commit:o},r)=>{t("setPaginationOffset",0),o(T.SET_RATING_FILTER,r)},resetAllReviewConfig:({commit:t})=>{t(T.SET_RATING_FILTER,[]),t(T.SET_CATEGORY,""),t(T.SET_KEYWORDS_SEARCH,[]),t(T.SET_SEARCH_TERM,"")},applySort:({dispatch:t,commit:o},r)=>{t("setPaginationOffset",0),o(T.SET_REVIEW_SORTING,r)},applySearchTerm:async({commit:t},o)=>{t(T.SET_SEARCH_TYPE,"searchBar"),t(T.SET_OFFSET,0),t(T.SET_SEARCH_TERM,o),t(T.SET_KEYWORDS_SEARCH,[])},applyKeywordsSearch:async({commit:t,state:o},r)=>{t(T.SET_SEARCH_TYPE,"keywordSearch"),t(T.SET_OFFSET,0);const a=o.keywords.filter(n=>r.includes(n.keyword));t(T.SET_KEYWORDS_SEARCH,a),t(T.SET_SEARCH_TERM,"")},setTranslationKey:({commit:t},o)=>{t(T.SET_TRANSLATION_KEY,o)},setReviewsLocale:({commit:t},o)=>{t(T.SET_REVIEWS_LOCALE,o)}}}const yn={hasBeenCalled:e=>!!e?.hasBeenCalled,keywordStrings:({keywords:e})=>e.map(t=>t.keyword),selectedKeywordStrings:({keywordsSearchTerms:e})=>e.map(t=>t.keyword)},Rn={[T.SET_REVIEWS](e,t){e.reviews=t},[T.SET_LOADING_STATE](e,t){e.isLoading=t},[T.SET_ACTIVITY](e,t){e.activityId=t},[T.SET_RATING_FILTER](e,t){e.rating=t},[T.SET_OFFSET](e,t){e.currentOffset=t},[T.SET_TOTAL_REVIEWS](e,t){e.totalReviews=t},[T.SET_KEYWORDS](e,t){e.keywords=t},[T.SET_LOADING_ERROR](e,t){e.hasRequestError=t},[T.SET_SESSION_LANGUAGE](e,t){e.sessionLanguage=t},[T.SET_SEARCH_TYPE](e,t){e.searchType=t},[T.UPDATE_REVIEW](e,t){const o=[...e.reviews],r=o.findIndex(a=>a.id===t.id);r===-1?o.push(t):o[r]=t,e.reviews=o},[T.UPDATE_REVIEWS](e,t){e.reviews=[...e.reviews,...t]},[T.SET_CATEGORY](e,t){e.category=t},[T.SET_REVIEW_SORTING](e,t){e.sort=t},[T.SET_REVIEWS_LOCALE](e,t){e.reviewsLocale=t},[T.SET_SEARCH_TERM](e,t){e.searchTerm=t},[T.SET_KEYWORDS_SEARCH](e,t){e.keywordsSearchTerms=t},[T.HAS_BEEN_CALLED](e,t){e.hasBeenCalled=t},[T.SET_PRELOADED_REVIEWS](e,t){e.preloadedReviews=t}};class vn{constructor(t){R(this,"httpClient");R(this,"defaultParams",{offset:0,limit:Je.REVIEWS_FETCH_LIMIT});this.httpClient=t}fetchReviews(t){const{defaultParams:o}=this,r={limit:t.limit||o.limit,offset:t.offset||o.offset},a=t.activityId;return t.category&&(r.category=t.category),t.sort&&(r.sort=t.sort),t.rating?.length&&(r.rating=t.rating.join(",")),t.searchTerm&&t.searchTerm.length>1&&(r.searchTerm=t.searchTerm),t.mediaType&&(r.mediaType=t.mediaType),this.httpClient.get(new O("travelers-api.activities-reviews",{pathParams:{activityToFetch:a}}),{params:r,headers:{"Accept-Language":t.locale,"x-allow-cache":!0}})}translateReview(t,o){const r={"Accept-Language":o};return this.httpClient.get(new O("travelers-api.reviews-translated",{pathParams:{reviewId:t}}),{headers:r})}markReviewHelpful(t){return this.httpClient.post(new O("travelers-api.reviews-helpful",{pathParams:{reviewId:t}}))}}const Cn=e=>({namespaced:!0,state:Sn,actions:An(new vn(e)),getters:yn,mutations:Rn}),H={SET_SEO_HIGHLIGHTS:"SET_SEO_HIGHLIGHTS",SET_LOADING_STATE:"SET_LOADING_STATE",SET_SEO_HIGHLIGHTS_ERROR:"SET_SEO_HIGHLIGHTS_ERROR",HAS_BEEN_CALLED:"HAS_BEEN_CALLED"};function Ln(e){return{fetchSeoHighlight:async({commit:t},o)=>{t(H.SET_LOADING_STATE,!0),t(H.HAS_BEEN_CALLED,!0);const{locationId:r,isCountry:a=!1,categoryId:n}=o;try{const s=await e.fetchSeoHighlight(r,a,n);return s.highlightSection&&!Y(s.highlightSection)?t(H.SET_SEO_HIGHLIGHTS,s.highlightSection):t(H.SET_SEO_HIGHLIGHTS_ERROR,!0),t(H.SET_LOADING_STATE,!1),s}catch{return t(H.SET_SEO_HIGHLIGHTS_ERROR,!0),t(H.SET_LOADING_STATE,!1),null}}}}const On={seoHighlights:e=>e,hasBeenCalled:e=>!!e?.hasBeenCalled},Dn={[H.SET_SEO_HIGHLIGHTS](e,t){e.highlightSection=t},[H.SET_LOADING_STATE](e,t){e.isLoading=t},[H.SET_SEO_HIGHLIGHTS_ERROR](e,t){e.hasError=t},[H.HAS_BEEN_CALLED](e,t){e.hasBeenCalled=t}},bn=()=>({isLoading:!1,hasError:!1,hasBeenCalled:!1,highlightSection:{title:null,highlights:[]}});function Nn(e){return{namespaced:!0,state:bn,actions:Ln(new le(e)),getters:On,mutations:Dn}}const G={SET_SEO_FAQS:"SET_SEO_FAQS",SET_LOADING_STATE:"SET_LOADING_STATE",SET_SEO_FAQS_ERROR:"SET_SEO_FAQS_ERROR",HAS_BEEN_CALLED:"HAS_BEEN_CALLED"};function Pn(e){return{fetchSeoFaq:async({commit:t},o)=>{t(G.SET_LOADING_STATE,!0),t(G.HAS_BEEN_CALLED,!0);const{locationId:r,categoryId:a}=o;try{const n=await e.fetchSeoFaq(r,a);return n.dynamicFaqs&&!Y(n.dynamicFaqs)?t(G.SET_SEO_FAQS,n.dynamicFaqs):t(G.SET_SEO_FAQS_ERROR,!0),t(G.SET_LOADING_STATE,!1),n}catch{return t(G.SET_SEO_FAQS_ERROR,!0),t(G.SET_LOADING_STATE,!1),null}}}}const kn={seoFaqs:e=>e,hasBeenCalled:e=>!!e?.hasBeenCalled},xn={[G.SET_SEO_FAQS](e,t){e.dynamicFaqs=t},[G.SET_LOADING_STATE](e,t){e.isLoading=t},[G.SET_SEO_FAQS_ERROR](e,t){e.hasError=t},[G.HAS_BEEN_CALLED](e,t){e.hasBeenCalled=t}},Un=()=>({isLoading:!1,hasError:!1,hasBeenCalled:!1,dynamicFaqs:{title:null,items:[]}});function Mn(e){return{namespaced:!0,state:Un,actions:Pn(new le(e)),getters:kn,mutations:xn}}var at=(e=>(e.SET_IS_LOADING="SET_IS_LOADING",e.SET_SEO_CONTENT="SET_SEO_CONTENT",e.SET_HAS_BEEN_CALLED="SET_HAS_BEEN_CALLED",e))(at||{});function Fn(e){const{SET_IS_LOADING:t,SET_SEO_CONTENT:o,SET_HAS_BEEN_CALLED:r}=at;return{fetchSeoContent:async({commit:a},n)=>{a(t,!0),a(r,!0);try{const s=await e.fetchSeoContent(n),{data:i}=s,{seoContent:c}=i;return a(o,c),a(t,!1),s}catch{return{}}}}}const Hn={isLoading:e=>e.isLoading,seoContent:e=>e.seoContent,seoText:e=>e.seoText,hasBeenCalled:e=>!!e?.hasBeenCalled},{SET_IS_LOADING:Gn,SET_SEO_CONTENT:Bn,SET_HAS_BEEN_CALLED:Vn}=at,$n={[Gn](e,t){e.isLoading=t},[Bn](e,t){e.seoContent=t},[Vn](e,t){e.hasBeenCalled=t}};class Wn{constructor(t){R(this,"_httpClient");this._httpClient=t}fetchSeoContent(t){const{locationId:o,categoryId:r}=t,a={};return r&&(a.category=r),this._httpClient.get(new O("travelers-api.locations-seo-content",{pathParams:{locationId:o}}),{params:a,headers:{"x-allow-cache":!0}})}}const Yn=()=>({isLoading:!1,seoContent:[],seoText:"",hasBeenCalled:!1});function Kn(e){return{namespaced:!0,state:Yn,actions:Fn(new Wn(e)),getters:Hn,mutations:$n}}var nt=(e=>(e.SET_METADATA="SET_METADATA",e))(nt||{});function zn(e){const{SET_METADATA:t}=nt,o=(r,a)=>{S.error({error:a},`Error in: ${r}`)};return{fetchLocationMetaData:async({commit:r},a)=>{try{const n=await e.fetchLocationMetaData(a),{metadata:s}=n?.data??{};return r(t,s),n||{}}catch(n){return o("LocationMetaData",n),{}}}}}const Xn={locationMetaData:e=>e.metadata},{SET_METADATA:Zn}=nt,qn={[Zn](e,t){e.metadata=t}},Qn=()=>({metadata:{title:"",description:"",url:{url:"",alternate:{}},robots:""}});function Jn(e){return{namespaced:!0,state:Qn,actions:zn(new le(e)),getters:Xn,mutations:qn}}var ie=(e=>(e.SET_LOADING_STATE="SET_LOADING_STATE",e.SET_LOADING_ERROR="SET_LOADING_ERROR",e.SET_QUALIFIED_REVIEWS="SET_QUALIFIED_REVIEWS",e.HAS_BEEN_CALLED="HAS_BEEN_CALLED",e))(ie||{});const jn=e=>({fetchQualifiedReviews:async({commit:t},o)=>{const{SET_LOADING_STATE:r,SET_QUALIFIED_REVIEWS:a,HAS_BEEN_CALLED:n}=ie;t(r,!0);try{const i=(await e.fetchQualifiedReviews(o))?.data?.qualifiedReviews??{title:"",reviews:[]};return t(a,i),t(r,!1),t(n,!0),i}catch{return t(r,!1),{}}}}),es=e=>jn(e),ts={hasQualifiedReviewsError:e=>e.hasRequestError,hasBeenCalled:e=>!!e.hasBeenCalled,qualifiedReviews:e=>e.qualifiedReviews},os={[ie.SET_LOADING_STATE](e,t){e.isLoading=t},[ie.SET_LOADING_ERROR](e,t){e.hasRequestError=t},[ie.SET_QUALIFIED_REVIEWS](e,t){e.qualifiedReviews=t},[ie.HAS_BEEN_CALLED](e,t){e.hasBeenCalled=t}},rs=()=>({isLoading:!1,hasRequestError:!1,hasBeenCalled:!1,qualifiedReviews:{title:"",reviews:[]}});function as(e){return{namespaced:!0,state:rs,actions:es(new le(e)),getters:ts,mutations:os}}const he={SET_SEO_LOCATION_INTRO:"SET_SEO_LOCATION_INTRO",SET_LOADING_STATE:"SET_LOADING_STATE"};function ns(e){return{fetchSeoLocationIntro:async({commit:t},o)=>{t(he.SET_LOADING_STATE,!0);const{locationId:r}=o,a=await e.fetchSeoLocationIntro(r);return a?.locationIntro&&!Y(a.locationIntro)&&t(he.SET_SEO_LOCATION_INTRO,a.locationIntro),t(he.SET_LOADING_STATE,!1),a}}}const ss={seoLocationIntro:e=>e?.locationIntro?.description},is={[he.SET_SEO_LOCATION_INTRO](e,t){e.locationIntro=t},[he.SET_LOADING_STATE](e,t){e.isLoading=t}},cs=()=>({isLoading:!1,locationIntro:null});function ls(e){return{namespaced:!0,state:cs,actions:ns(new le(e)),getters:ss,mutations:is}}class us{constructor(t){this.httpClient=t}async getItineraryContent(t){const{number_of_days:o,location_id:r}=t,a=new O("itinerary-api.location-itinerary",{pathParams:{locationId:r},searchString:o!==void 0?`?number_of_days=${o}`:""}),n=await this.httpClient.get(a);if(!n.status||n.status>=400)throw new Error(`Failed to fetch itinerary content. ${JSON.stringify(n)}`);return n.data}}var Pe=(e=>(e.SET_LOADING_STATE="SET_LOADING_STATE",e.SET_LOCATION_ITINERARY="SET_LOCATION_ITINERARY",e))(Pe||{});const ds=e=>({async fetchLocationItinerary({commit:t},o){const{SET_LOADING_STATE:r,SET_LOCATION_ITINERARY:a}=Pe;t(r,!0);try{const n=await e.getItineraryContent(o);t(a,n),t(r,!1)}catch(n){S.error("Failed to fetch itinerary content",n),t(r,!1)}}}),ps=e=>ds(e),ms={isLoading:e=>e.isLoading,locationItinerary:e=>e.locationItinerary},gs={[Pe.SET_LOADING_STATE](e,t){e.isLoading=t},[Pe.SET_LOCATION_ITINERARY](e,t){e.locationItinerary=t}},ws=()=>({isLoading:!1,locationItinerary:void 0});function fs(e){return{namespaced:!0,state:ws,actions:ps(new us(e)),getters:ms,mutations:gs}}function Es(e,t,o,r){return{seoLinks:qo(e),seoHighlights:Nn(e),seoFaqs:Mn(e),seoContent:Kn(e),locationMetaData:Jn(e),reviews:Cn(e),companionContent:Kt(e),qualifiedReviews:as(e),seoLocationIntro:ls(e),itinerary:fs(e),...In(e,t,o,r)}}const hs=(e,t,o,r)=>{const a=Es(e,t,o,r);return Jt({modules:a,getters:Xo,state:_n,mutations:Zo})};Object.entries(Qo).filter(([e,t])=>new URL(t).pathname!=="/").map(([e])=>e.toLowerCase());function Ts(e){return e.filter(t=>t.enabled).map(t=>t.iso).join("|")}function _s(e){const{moduleName:t="route"}=e??{};return function(r,a){const n=je({to:a.currentRoute.value});r.registerModule(t,{namespaced:!0,state:n,mutations:{UPDATE(s,i){r.state[t]=je(i)}}}),a.afterEach((s,i)=>{r.commit(`${t}/UPDATE`,{to:s,from:i})})}}function je({to:e,from:t}){return{name:e.name,path:e.path,hash:e.hash,query:e.query,params:e.params,fullPath:e.fullPath,meta:e.meta,...t&&{from:je({to:t})}}}const Is=(e,t,o)=>o||(e.params.preventScrollTop||e.meta.preventScrollTop?!1:e.hash?{el:e.hash}:{top:0});function Ss({regexForPathLocales:e,routes:t}){if(!e)return t;const o=`/:locale(${e})?`;return t.map(r=>{const a=`${o}${r.path}`;let n=[];Array.isArray(r.alias)?n=r.alias:typeof r.alias=="string"&&(n=[r.alias]);const s=n.map(i=>`${o}${i}`);return{...r,name:r.name||"UnnamedRoute",path:a,meta:{...r.meta,containerName:r.meta?.containerName??r.name},alias:[...s]}})}const As=(e=[])=>function({isDevelopment:o=!1,pathLocales:r=[]}={}){const a=Ts(r),s=[...Ss({regexForPathLocales:a,routes:e}),o?{component:()=>D(()=>import("./index-786bb1ad.js"),["assets/index-786bb1ad.js","assets/master-0896bea7.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/commons-store-f390809e.js","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-20f5fdf6.css","assets/master-496080ae.css","assets/vendors-sentry-d2dc44b0.js","assets/index-b27d52c0.css"]),name:"PlatformHome",path:"/:pathMatch(.*)*",meta:{hideSearchField:!0,featureToggles:[],slug:"PlatformHome"}}:{component:()=>D(()=>import("./index-3505d8ba.js"),["assets/index-3505d8ba.js","assets/braze-89d377b3.js","assets/master-0896bea7.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/commons-store-f390809e.js","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-20f5fdf6.css","assets/master-496080ae.css","assets/vendors-sentry-d2dc44b0.js","assets/index-2f90c5db.css"]),name:"NotFound",path:"/:pathMatch(.*)*",meta:{hideSearchField:!0,slug:"NotFound"}}];return jt({history:eo(),routes:s,scrollBehavior:Is})},ne="SX-HideBreadcrumbsSRP",Ee="mov-location-intro",ys=[{component:()=>D(()=>import("./search-assistant-page-3a2ae30e.js"),["assets/search-assistant-page-3a2ae30e.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/vertical-activity-card-list-view-00cb10f9.js","assets/list-view-activity-card-base-4d646593.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/track-visibility-v2-f5a0fce1.js","assets/braze-89d377b3.js","assets/vendors-sentry-d2dc44b0.js","assets/search-assistant-page-d62712c9.css"]),name:"SearchAssistantPage",path:"/search-assistant/",props:!0,meta:{slug:"SearchAssistantPage",experiments:[],featureToggles:[],containerName:"SearchAssistantPage"}},{component:()=>D(()=>import("./trip-item-lists-6f41e9f7.js"),["assets/trip-item-lists-6f41e9f7.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/sdui-page-98e0d58e.js","assets/page-handler-a40387c8.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/broadcast-20f5fdf6.css","assets/track-visibility-wrapper-7924d045.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/track-visibility-v2-f5a0fce1.js","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/locale-loader-2707bd7a.js","assets/page-handler-d5eed6b9.css","assets/master-0896bea7.js","assets/master-496080ae.css","assets/locations-meta-info-e7d5426a.js","assets/seo-markup-9605305b.js","assets/locations-url-helper-8503ca7e.js","assets/vendors-sentry-d2dc44b0.js"]),name:"TripItemList",path:"/:locationName?-l:locationId(\\d+)/sights/",props:!0,meta:{slug:"TripItemList",experiments:[K],featureToggles:[],containerName:"TripItemList"}},{component:()=>D(()=>import("./itinerary-d3bfd56e.js"),["assets/itinerary-d3bfd56e.js","assets/braze-89d377b3.js","assets/master-0896bea7.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/commons-store-f390809e.js","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-20f5fdf6.css","assets/master-496080ae.css","assets/locations-meta-info-e7d5426a.js","assets/seo-markup-9605305b.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/location-banner-base-d57f05ff.js","assets/track-visibility-v2-f5a0fce1.js","assets/location-banner-base-228801f6.css","assets/trip-item-group-navigation-4b7ada06.js","assets/categories-bottom-sheet-e78c9668.js","assets/locations-url-helper-8503ca7e.js","assets/track-visibility-wrapper-7924d045.js","assets/categories-bottom-sheet-c81c50e7.css","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/location-globals-99ac8a3b.js","assets/trip-item-group-navigation-4051103f.css","assets/vendors-sentry-d2dc44b0.js","assets/itinerary-15b5a789.css"]),name:"LocationItinerary",path:"/:locationName?-l:locationId(\\d+)/itinerary/",props:!0,meta:{slug:"LocationItinerary",experiments:[],featureToggles:[],containerName:"LocationItinerary"}},{component:()=>D(()=>import("./things-to-do-8fd1bd58.js"),["assets/things-to-do-8fd1bd58.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/sdui-page-98e0d58e.js","assets/page-handler-a40387c8.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/broadcast-20f5fdf6.css","assets/track-visibility-wrapper-7924d045.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/track-visibility-v2-f5a0fce1.js","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/locale-loader-2707bd7a.js","assets/page-handler-d5eed6b9.css","assets/master-0896bea7.js","assets/master-496080ae.css","assets/locations-meta-info-e7d5426a.js","assets/seo-markup-9605305b.js","assets/locations-url-helper-8503ca7e.js","assets/vendors-sentry-d2dc44b0.js"]),name:"ThingsToDo",path:"/:locationName?-l:locationId(\\d+)/ttd/",props:!0,meta:{slug:"ThingsToDo",experiments:[],featureToggles:[],containerName:"ThingsToDo"}},{component:()=>D(()=>import("./nearby-locations-f466a0e0.js"),["assets/nearby-locations-f466a0e0.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/master-0896bea7.js","assets/commons-store-f390809e.js","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-20f5fdf6.css","assets/master-496080ae.css","assets/new-intro-banner-4b092c1b.js","assets/datepicker-box-8cbf7591.js","assets/fetch-location-data-helper-dfa71ee7.js","assets/locations-url-helper-8503ca7e.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/locale-loader-2707bd7a.js","assets/datepicker-box-cc5a7fec.css","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/location-globals-99ac8a3b.js","assets/track-visibility-v2-f5a0fce1.js","assets/new-intro-banner-8f8f7731.css","assets/destination-page-request-6cd781ed.js","assets/vertical-activity-card-list-view-00cb10f9.js","assets/destination-page-request-c98926c0.css","assets/props-builder-helper-ee3e5219.js","assets/country-mapping-b6b78f46.js","assets/vendors-sentry-d2dc44b0.js","assets/nearby-locations-b22cbf70.css"]),name:"LocationNearby",path:"/:locationName?-l:locationId(\\d+)/nearby/",props:!0,meta:{slug:"LocationNearby",experiments:[dt,K,X,re],featureToggles:[ne],containerName:"LocationNearby"}},{component:()=>D(()=>import("./location-ssr-f26fc656.js"),["assets/location-ssr-f26fc656.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/page-handler-a40387c8.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/broadcast-20f5fdf6.css","assets/track-visibility-wrapper-7924d045.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/track-visibility-v2-f5a0fce1.js","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/locale-loader-2707bd7a.js","assets/page-handler-d5eed6b9.css","assets/country-mapping-b6b78f46.js","assets/locations-url-helper-8503ca7e.js","assets/fetch-location-data-helper-dfa71ee7.js","assets/vendors-sentry-d2dc44b0.js"]),name:"Location",path:"/:locationName?-l:locationId(\\d+)",props:!0,meta:{slug:"Location",containerName:"Destination",experiments:[Jo,X,Ve,re,me,K,dt,ge,jo,we,er,tr],featureToggles:[Ee,ne]}},{component:()=>D(()=>import("./location-ssr-f26fc656.js"),["assets/location-ssr-f26fc656.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/page-handler-a40387c8.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/broadcast-20f5fdf6.css","assets/track-visibility-wrapper-7924d045.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/track-visibility-v2-f5a0fce1.js","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/locale-loader-2707bd7a.js","assets/page-handler-d5eed6b9.css","assets/country-mapping-b6b78f46.js","assets/locations-url-helper-8503ca7e.js","assets/fetch-location-data-helper-dfa71ee7.js","assets/vendors-sentry-d2dc44b0.js"]),name:"LocationCountry",path:"/:countryName?-n:countryId(\\d+)",props:!0,meta:{containerName:"Destination",experiments:[ge,K,we,X,re,me],featureToggles:[Ee,ne],slug:"LocationCountry"}},{component:()=>D(()=>import("./location-ssr-f26fc656.js"),["assets/location-ssr-f26fc656.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/page-handler-a40387c8.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/broadcast-20f5fdf6.css","assets/track-visibility-wrapper-7924d045.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/track-visibility-v2-f5a0fce1.js","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/locale-loader-2707bd7a.js","assets/page-handler-d5eed6b9.css","assets/country-mapping-b6b78f46.js","assets/locations-url-helper-8503ca7e.js","assets/fetch-location-data-helper-dfa71ee7.js","assets/vendors-sentry-d2dc44b0.js"]),name:"LocationCategory",path:"/:locationName?-l:locationId(\\d+)/:categoryName?-tc:categoryId(\\d+)",props:!0,meta:{slug:"Location",containerName:"Destination",featureToggles:[Ee,ne],experiments:[me,K,ge,$e,we,pt,X,Ve,re,mt]}},{component:()=>D(()=>import("./location-ssr-f26fc656.js"),["assets/location-ssr-f26fc656.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/page-handler-a40387c8.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/broadcast-20f5fdf6.css","assets/track-visibility-wrapper-7924d045.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/track-visibility-v2-f5a0fce1.js","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/locale-loader-2707bd7a.js","assets/page-handler-d5eed6b9.css","assets/country-mapping-b6b78f46.js","assets/locations-url-helper-8503ca7e.js","assets/fetch-location-data-helper-dfa71ee7.js","assets/vendors-sentry-d2dc44b0.js"]),name:"DayTrips",path:"/:locationName?-l:locationId(\\d+)/:categoryName?-tc:categoryId(\\d+)/:toLocationName?-tl:locationToId(\\d+)/",props:!0,meta:{slug:"Location",containerName:"Destination",experiments:[me,K,ge,$e,we,pt,X,re],featureToggles:[Ee,ne]}},{component:()=>D(()=>import("./location-ssr-f26fc656.js"),["assets/location-ssr-f26fc656.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/page-handler-a40387c8.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/broadcast-20f5fdf6.css","assets/track-visibility-wrapper-7924d045.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/track-visibility-v2-f5a0fce1.js","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/locale-loader-2707bd7a.js","assets/page-handler-d5eed6b9.css","assets/country-mapping-b6b78f46.js","assets/locations-url-helper-8503ca7e.js","assets/fetch-location-data-helper-dfa71ee7.js","assets/vendors-sentry-d2dc44b0.js"]),name:"LocationCountryCategory",path:"/:countryName?-n:countryId(\\d+)/:categoryName?-tc:categoryId(\\d+)",props:!0,meta:{slug:"LocationCountry",experiments:[me,K,ge,$e,we,X,Ve,re,mt],featureToggles:[Ee,ne],containerName:"Destination"}},{component:()=>D(()=>import("./sdui-playground-77d419a5.js"),["assets/sdui-playground-77d419a5.js","assets/sdui-page-98e0d58e.js","assets/braze-89d377b3.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/page-handler-a40387c8.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/broadcast-40095269.js","assets/support-listeners-44012a3e.js","assets/commons-store-f390809e.js","assets/broadcast-20f5fdf6.css","assets/track-visibility-wrapper-7924d045.js","assets/constants-806825c5.js","assets/rating-overall-d2364798.js","assets/rating-overall-e7406703.css","assets/list-view-activity-card-base-4d646593.js","assets/wishlist-icon-62c325db.js","assets/wishlist-icon-d7020bb6.css","assets/list-view-activity-card-base-33f6f90d.css","assets/constants-5bbade58.css","assets/track-visibility-v2-f5a0fce1.js","assets/css-slider-card-f7a5d141.js","assets/css-slider-card-fa333d40.css","assets/gyg-loading-animation-13ef82a5.js","assets/gyg-loading-animation-a6714641.css","assets/locale-loader-2707bd7a.js","assets/page-handler-d5eed6b9.css","assets/master-0896bea7.js","assets/master-496080ae.css","assets/vendors-sentry-d2dc44b0.js"]),name:"SduiPlayground",path:"/sdui-playground/:pageId*",meta:{slug:"SduiPlayground",containerName:"SduiPlayground",experiments:[X,K]}}],Rs=As(ys),vs=async e=>{const{isDevelopment:t,store:o,currency:r,defaultGettexts:a,defaultLocale:n,errorHandler:s,gettexts:i,debugGettextKeys:c,koaContext:u,locale:l=n,locales:p,initialContext:g,isPciCompliantRoute:m,createRouter:E,sync:y}=e,w=E({isDevelopment:t,pathLocales:p});return y(o,w),g?.geoIpData&&o.commit("context/setGeoIpData",g?.geoIpData),r&&o.commit("context/setCurrentCurrency",r),o.commit("context/setCurrentLocale",l),o.commit("context/setDefaultLocale",n),u?.originalUrl?.includes("/unsubscribe?")&&o.dispatch("unsubscribe/setUserParams",u.query),{isPciCompliantRoute:m,router:w,store:o,locale:{current:l,default:n},gettexts:{default:a,current:i,debug:c},vue:{errorHandler:s}}};function Cs(e,t="_"){return e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}const W=window,Le=W.navigator,Q=W.performance;class Ls{constructor(t,o,r,a){R(this,"collectorHost");R(this,"platform");R(this,"anonymizedIp");R(this,"beaconOffsetTimer");R(this,"visitorId");R(this,"isPerformanceMonitorSupported",!1);R(this,"beacon",{});R(this,"maxBeaconOffset",10);R(this,"reportSent",!1);R(this,"userConsentsAnalytics",window.OnetrustActiveGroups?.includes("C0002")??!1);R(this,"beaconBuffer",[]);R(this,"logger");this.collectorHost=t,this.platform=o,this.anonymizedIp=r,this.visitorId=a,Q&&W.PerformanceObserver&&W.PerformanceResourceTiming&&W.PerformanceNavigationTiming&&W.PerformanceMark&&(this.isPerformanceMonitorSupported=!0),window.addEventListener("consent.onetrust",n=>{const s=n.detail,i="C0002";this.userConsentsAnalytics=s.includes(i)}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&!this.reportSent&&(this.trackFrameworkComplete(),this.sendBeacon("complete"),this.sendResourceTimingsMetrics(),this.reportSent=!0)}),addEventListener("pagehide",()=>{this.reportSent||(this.trackFrameworkComplete(),this.sendBeacon("complete"),this.sendResourceTimingsMetrics(),this.reportSent=!0)})}sendResourceTimingsMetrics(){const o=Math.random()<0,r=window.location.hostname==="localhost";if(this.isPerformanceMonitorSupported&&o&&this.userConsentsAnalytics&&!r){const a=Q.getEntriesByType("resource"),n=i=>{const c=[".jpg",".jpeg",".png",".gif",".svg",".webp"],u=[".woff",".woff2",".ttf",".eot",".otf"],l=[".html",".htm"],p=c.some(f=>i.endsWith(f)),g=i.endsWith(".js"),m=i.endsWith(".css"),E=u.some(f=>i.endsWith(f)),y=l.some(f=>i.endsWith(f)),w=i.endsWith(".json");return p?"image":g?"script":m?"css":E?"font":y?"document":w?"json":"other"},s=i=>i.name.startsWith(W.location.origin)||i.name.startsWith("https://cdn.getyourguide.com")||i.name.startsWith("https://travelers-api.getyourguide.com")||i.name.startsWith("https://collector.getyourguide.com")||i.name.startsWith("https://experiments.getyourguide.com");a.forEach(i=>{const c={initiator_type:i.initiatorType,type:n(i.name),host:new URL(i.name).host,provider_type:s(i)?"first_party":"third_party",platform:this.isMobile()?"mweb":"desktop"};return We.distribution("gyg.perf.rum.resource_timing",i.duration,c)})}}isMobile(){return window.matchMedia("(max-width: 768px)").matches}trackFrameworkComplete(){const[t]=Q.getEntriesByName("frameworkComplete","mark");t&&(this.beacon.framework_complete=t.startTime)}captureBasicTimingInfo(){this.beacon.time_origin=Math.trunc(Q.timeOrigin);const[t]=Q.getEntriesByType("navigation");if(t){const o=t.toJSON();Object.keys(o).forEach(r=>{["entryType","serverTiming","name","startTime"].includes(r)||(this.beacon[Cs(r)]=o[r])})}if(Le.connection){const o=Le.connection;this.beacon.downlink=o.downlink,this.beacon.rtt=o.rtt,this.beacon.effective_type=o.effectiveType,this.beacon.save_data=o.saveData}}initializeBeacon(t,o=""){this.beacon.header={platform:this.platform,ip_address:this.anonymizedIp,domain:W.location.host,url:W.location.href,user_agent:Le.userAgent},this.beacon.user={visitor_id:this.visitorId},this.beacon.do_not_track=String(Le.doNotTrack),this.beacon.container_name=t,this.beacon.view_id=o}sendBeacon(t){this.beacon.beacon_trigger=t,this.beacon.beacon_time=Q.now();const o=JSON.stringify(this.beacon);this.beaconOffsetTimer=setTimeout(()=>{this.sendBeacon("timeout")},this.maxBeaconOffset*1e3),this.logger?this.logger(this.beacon).catch(()=>{We.increment("perf_send_beacon_failure")}):this.beaconBuffer.push(JSON.parse(o)),clearTimeout(this.beaconOffsetTimer)}flushBeaconBuffer(){this.beaconBuffer.forEach(t=>{this.logger(t).catch(()=>{We.increment("perf_send_beacon_failure")})}),this.beaconBuffer=[]}setLogger(t){this.logger=t,this.flushBeaconBuffer()}onLoad(t,o=""){this.initializeBeacon(t,o),this.trackWebVitals(),this.isPerformanceMonitorSupported&&this.captureBasicTimingInfo()}setMark(t){this.isPerformanceMonitorSupported&&Q.mark(t)}trackWebVitals(){Er(t=>{this.beacon.cumulative_layout_shift=t.value,this.sendBeacon("cls_complete")}),hr(t=>{this.beacon.time_to_first_byte=t.value}),Tr(t=>{this.beacon.first_input_delay=t.value,this.sendBeacon("fid_complete")}),_r(t=>{this.beacon.largest_contentful_paint=t.value,this.sendBeacon("lcp_complete")}),Ir(t=>{this.beacon.first_contentful_paint=t.value})}}function Os(e){return e==="/"}function Ds(e){return e.indexOf("https://")===0}function bs(e){return/([a-zA-Z-]+)\.testing\./.test(e)}function Ns(e){const t=/([a-zA-Z-]+)\.testing(\d+)\./.exec(window.location.host);if(t){const o=t[2];return e.replace(".testing.",`.testing${o}.`)}return e}const Ps=1e4;class ks extends Error{constructor(t){super(t),this.name="ConnectionError"}}const zt=e=>{const t=e?.toJSON&&e?.toJSON();if(t){const o=t?.message;return e.code==="ECONNABORTED"&&/timeout of \d+ms exceeded/.test(o)}return!1},xs=e=>typeof FormData<"u"&&e instanceof FormData?Array.from(e.values()).length===0:Y(e);class Us{constructor(t,o){R(this,"instance");R(this,"defaultClientHeaders");R(this,"timeout");R(this,"apiUrls");R(this,"errorName");R(this,"clientName");R(this,"hasConnectivityIssues");const{currency:r,geoIpCountry:a,locale:n,partnerHash:s,partnerId:i,platform:c,visitorId:u}=t;this.apiUrls=o.apiUrls,this.defaultClientHeaders={"accept-currency":r,"accept-language":n,"geo-ip-country":a,"x-gyg-geoip-country":a,"partner-id":i,"x-gyg-partner-hash":s,"visitor-id":u,"visitor-platform":c}}setInstance(t){if(!t)throw new Error("Expected correct instance to be created.");this.instance=t}async call(t,o,r){const{data:a,options:n={}}=r;if(!(o instanceof O))throw S.error({endpoint:o},"Outdated usage of HTTP Client"),new Error("Outdated usage of HTTP Client");const{defaultRequestHeaders:s,host:i,url:c}=this.generateUrl(o),u={...this.defaultClientHeaders,...s},l={...n,method:t,url:c};try{return await this.setupAdditionalOptions(l,u,{host:i}),l.headers={...u,...n.headers},o.searchString&&(l.url+=o.searchString),xs(a)||(l.data=a),await this.instance.request(l)}catch(p){if(this.hasConnectivityIssues&&this.hasConnectivityIssues())throw new ks("Connection is offline");const g={method:t,endpoint:`${o.api}.${o.name}`,client:this.clientName,emptyerror:!!p,status_code:p?.response?.status};throw p?.isAxiosError&&p?.response?.status===404?p:this.errorName==="BrowserHTTPClientError"&&(p?.message==="Network Error"||p?.message==="Request canceled"||p?.message==="Request aborted")?(U.increment("browser_network_error",g),p):(U.increment("api_error",g),S.error(or(this.errorName,p)),zt(p)&&U.increment("api_timeout",g),p)}}put(t,o,r){return this.call("put",t,{data:o,options:r})}delete(t,o){return this.call("delete",t,{options:o})}get(t,o){return this.call("get",t,{options:o})}post(t,o,r){return this.call("post",t,{data:o,options:r})}patch(t,o,r){return this.call("patch",t,{data:o,options:r})}}const Rt={"sdui-local":{"travelers-api.pages-sdui":"http://localhost:3001/","travelers-api.blocks-sdui":"http://localhost:3001/",removeInUrl:"user-interface/"},"sdui-testing-20":{"travelers-api.pages-sdui":"http://localhost:3005/pages","travelers-api.blocks-sdui":"http://localhost:3005/blocks",removeInUrl:""}},Ms=(e,t,o,r,a=!1)=>{let n=null;if(r.length){const s=r[0],i=Rt[s]?.[`${t.api}.${t.name}`];if(i){const c=Rt[s]?.removeInUrl,u=o.replace(c,"");a?n=gr.resolve(i,u):n=new URL(u,i).href,n&&S.info(`📝 URL override: 
 - Original ${e}
 - Override ${n}`)}}return n};class Fs extends Us{constructor(o,r){super(o,r);R(this,"locale");R(this,"firebaseConfiguration");this.errorName="BrowserHTTPClientError",this.clientName="external",this.firebaseConfiguration=o.firebaseConfiguration,this.locale=o.locale,this.defaultClientHeaders["x-gyg-app-type"]="Web";const{defaultClientHeaders:a}=this,n=Sr.create({headers:a,timeout:Ps});wr(n,{retries:0}),this.setInstance(n)}generateUrl(o){o.setClientType(rr.external),o.setApiUrls(this.apiUrls);const{headers:r,host:a,path:n}=o;if(Ds(n)||Os(o.url))return{defaultRequestHeaders:r,host:a,url:n};let s=o.url;if(!o.isDomainDependant()&&bs(s))return{defaultRequestHeaders:r,host:a,url:new URL(n,Ns(s)).href};o.isDomainDependant()&&(Ke.isTesting||Ke.isProduction)&&(s=window.location.origin);let i=new URL(n,s).href;const c=Ms(i,o,n,Ke.endpointsOverrides,!1);return c&&(i=c),{defaultRequestHeaders:r,host:a,url:i}}async setupAdditionalOptions(o,r){if(!Y(o)&&o.needsAuth){delete o.needsAuth;try{const{default:a}=await D(()=>import("./vendors-firebase-57a887ed.js").then(i=>i.i),["assets/vendors-firebase-57a887ed.js","assets/braze-89d377b3.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js"]);await a(this.firebaseConfiguration,this.locale);const{auth:n}=(await D(()=>import("./vendors-firebase-57a887ed.js").then(i=>i.a),["assets/vendors-firebase-57a887ed.js","assets/braze-89d377b3.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js"])).default;let s=await n().currentUser?.getIdToken();if(s||(s=await new Promise((i,c)=>{n().onAuthStateChanged(async u=>{i(await u?.getIdToken())},c)})),!s){const i="Firebase token has expired or it's invalid.",c=new CustomEvent("show-login-modal",{bubbles:!0,cancelable:!0,detail:{optOutOfForcedLogin:o.optOutOfForcedLogin}});throw window.dispatchEvent(c),o.optOutOfForcedLogin?new Error(`${i} No further actions needed.`):new Error(`${i} Customer has requested to login again.`)}r.Authorization="Bearer "+s}catch(a){throw S.error({url:o.url,firebaseError:a},"HTTP Request Auth Error"),a}}r["visitor-id"]=o.headers?.["visitor-id"]||ee().get("visitorId")||r["visitor-id"]||""}setConnectionErrorHandler(o){this.hasConnectivityIssues=o}}function Hs(e){return{externalApiUrls:e.externalApiUrls,currency:e.currency,locale:e.locale,defaultLocale:e.defaultLocale,testingEnvBasicAuth:e.testingEnvBasicAuth,visitorId:e.visitorId,geoIpCountry:e.geoIpData?.country??"",partnerId:e.eventDataSource.partnerId??"-",partnerHash:e.partnerSession.partnerHash??"",platform:e.platform,firebaseConfiguration:e.firebaseConfiguration}}function Gs(e,t){const o=new Ar(e),r=async(w,f)=>{const C={...t,...f};try{await o.log(w,C)}catch{}},a=async(w,f,C,v)=>{const B={target:f};C&&(B.id=C),v&&(B.metadata=JSON.stringify(v)),await r(`${w}`,B)};return{log:r,logTravelerUIClick:async(w,f,C)=>{await a("TravelerWebUIClick",w,f,C)},logTravelerUIEnteredViewport:async(w,f,C)=>{await a("TravelerWebUIEnteredViewport",w,f,C)},logTravelerUIFetch:async(w,f,C)=>{await a("TravelerWebUIFetch",w,f,C)},logTravelerUIShow:async(w,f,C)=>{await a("TravelerWebUIShow",w,f,C)},logTravelerUIDrag:async(w,f,C)=>{await a("TravelerWebUIDrag",w,f,C)},logTravelerUIZoom:async(w,f,C)=>{await a("TravelerWebUIZoom",w,f,C)},logTravelerUISlide:async(w,f,C)=>{await a("TravelerWebUISlide",w,f,C)},logTravelerUISelect:async(w,f,C)=>{await a("TravelerWebUISelect",w,f,C)},logTravelerUIChange:async(w,f,C)=>{await a("TravelerWebUIChange",w,f,C)},logTravelerUISubmit:async(w,f,C)=>{await a("TravelerWebUISubmit",w,f,C)},logTravelerBrowserPerformance:async w=>{await r("BrowserPerformance",w)}}}function Bs(e){const t={h:"",c:"",v:"",t:"0",s:""};for(const o of decodeURIComponent(e).split("&")){const[r,a]=o.split("=");t[r]=a}return{partnerHash:t.h,campaign:t.c,partnerVisitorId:t.v,showTaBanner:t.t==="1",partnerSourceId:t.s}}function Vs(e){const t=e.split("?")[0],o="/html-voucher/",r="/voucher-preview/",a="/html-giftcard",n="/flexibility-upgrade-policy";return!!(t.startsWith(o)||t.startsWith(r)||t.startsWith(a)||t.includes(n))}function $s(e){const t=e.split("?")[0],o=["/payment/?$","/payment-information(/[a-zA-Z]{32})?/?$","/payment-information(/[a-zA-Z]{32})?/additional/?$","/pay(/[a-zA-Z]{32})?/?$","/pay(/[a-zA-Z]{32})?/additional/?$"];return!!t.match(o.join("|"))||Vs(e)}const Me=window,oe=Me.__INITIAL_STATE__,b=oe?.context,N=ee(),k={anonymizedIp:N.get("anonymizedIp"),platform:N.get("platform"),visitorId:N.get("visitorId"),apVId:N.get("apVId"),geoip_city:N.get("geoip_city"),geoip_country:N.get("geoip_country"),geoip_region:N.get("geoip_region"),currency:N.get("currency"),isSynthetic:N.get("is_synthetic"),partnerSession:N.get("partnerSession")};b.userAgent=navigator.userAgent;const et=new Ls(b.collectorHost,b.platform,k.anonymizedIp??b.anonymizedIp,k.visitorId??b.visitorId);et.onLoad(ot(oe.route),k.apVId??b.eventDataSource["AP-VID"]);const se=[],vt=5;let Ct;const Ws=(e,t)=>{const o=e(t,N);return o.subscribe(r=>{if(se.length>vt){const a=se.length-vt,n=se.length-a;se.splice(n,a)}se.push(r.type)}),oe&&o.replaceState(oe),k.partnerSession&&o.commit("context/setPartnerSession",sr(Bs(k.partnerSession))),o.commit("context/setDebugGettextKeys",N.get("debugGettextKeys")),k.visitorId?o.commit("context/setVisitorId",k.visitorId):ue.info({message:"[ContextOverride] No visitor in cookie:",cookies:document.cookie,originalVisitorId:b.visitorId,directParseFromDocumentCookie:document.cookie.split("; ").find(r=>r.startsWith("visitor_id="))?.split("=")[1],url:document.location.href,cookiesEnabled:navigator.cookieEnabled,partnerHash:b.partnerHash,referrer:document.referrer}),k.anonymizedIp&&o.commit("context/setAnonymizedIp",k.anonymizedIp),k.isSynthetic&&o.commit("context/setIsSyntheticRequest",k.isSynthetic),k.currency&&((oe.context?.currencies).find(a=>a.iso===k.currency)?o.commit("context/setCurrentCurrency",k.currency):N.expire("currency")),o},Ys=async()=>{const e=oe[Ze];return await gt.init({client:"traveler-frontend",logger:ue,logIfExperimentNotFound:!b.isProduction,baseURL:b.experimentationHost,sendImpressions:b.experimentationImpressions},e?.cache),{experimentationSDK:gt}},Ks=e=>{const{anonymizedIp:t,containerName:o,eventDataSource:r,isMobileDevice:a,isOfficeIp:n}=e.state.context,s={anonymizedIp:t,isMobile:a,isOfficeIp:n,requestCookies:JSON.stringify({_ga:N.get("ga"),_fbc:N.get("fbc"),_fbp:N.get("fbp"),OptanonConsent:N.get("optanonConsent"),__utmzz:N.get("utmzz")}),"AP-VID":k.apVId??b.eventDataSource["AP-VID"],visitorId:e.getters["context/visitorId"],partnerId:e.getters["context/partnerHash"],referrer:document.referrer};e.commit("context/setEventDataSource",{containerName:o,rawEventDataSource:r,opts:s})},zs=e=>{const t=e.state.context,o={isDebug:t.eventDataSource.isDebug??!1,collectorUrl:t.collectorHost??"",sentBy:t.eventDataSource.sent_by??"",applicationVersion:Me.releaseTag??"",platform:t.platform,viewId:t.eventDataSource["AP-VID"]??"",containerName:t.eventDataSource.containerName??"",visitorId:t.eventDataSource.visitorId??""},r={currency:t.currency,is_logged_in:e.state?.auth?.isLoggedIn??!1,customer_id:t.eventDataSource.customerId||void 0,partner_hash_code:t.eventDataSource.partnerId||void 0};return Gs(o,r)},Xs=async(e,t,o)=>{const r=Me.document.documentElement,a=r.getAttribute("lang"),n=a!==null?a.toString():"",s=r.getAttribute("default-lang"),i=s!==null?s.toString():"",c=$s(document.location.pathname);return await vs({createRouter:t,isDevelopment:b.isDevelopment,localePath:b.localePath,defaultLocale:i,locale:n,locales:b.locales,store:e,initialContext:b,sync:o,debugGettextKeys:e.getters["context/debugGettextKeys"],isPciCompliantRoute:c})};function Zs(e){try{ar()}catch(t){e.error("Error registering logger worker",{error:t})}try{nr()}catch(t){e.error("Error registering metrics worker",{error:t})}}Zs(ue);const qs=async(e,t,o=()=>{})=>{try{const r=Hs(b),a=new Fs(r,{apiUrls:r.externalApiUrls??{},currentPathUrl:new URL(window.location.href)}),n=Ws(e,a),[{router:s,isPciCompliantRoute:i,locale:c,gettexts:u,vue:l},{experimentationSDK:p}]=await Promise.all([Xs(n,t,o),Ys()]);if(Ct=Object.entries(Object.values(n.state.experimentation.cache.experiments)[0]).map(([g,m])=>({key:g,variation:m.experiment.variation.key})),b.isDevelopment){const{removeCssHotReloaded:g}=await D(()=>import("./collect-css-ssr-5d3ed6f9.js"),[]);g()}return{isPciCompliantRoute:i,experimentationSDK:p,locale:c,gettexts:u,store:n,router:{instance:s,createHandlers({ctx:g,resolve:m,reject:E}){return{onReady:()=>{const y=n.state.context;Ks(n);const{logTravelerBrowserPerformance:w,...f}=zs(n);et.setLogger(w),g.loadGettexts(y.gettexts,y.defaultGettexts),y.shouldUseProductionApiOnTestingEnv&&n.dispatch("notifications/setMessage","Warning: This testing instance uses the production API. Don't make any bookings other than with testing tours."),m({analyticsLoggers:f,perfMonitor:et})}}}},httpClient:{instance:a,createHandlers({ctx:g}){return{onConnectionError:()=>{const m=window&&window.navigator&&!navigator.onLine;return m&&setTimeout(()=>{g.appRootEmit("hide-all-modals"),n.dispatch("notifications/setMessage","offlineError")},1500),m}}}},vue:{...l,enrichRenderUpdateFailureForSentry(g){const m=g.prototype._update;g.prototype._update=function(E,y){try{m.call(this,E,y)}catch(w){Ft(w,{tags:{componentClass:E?.data?.staticClass,parentClass:E?.parent?.data?.staticClass},extra:{componentTag:E?.tag,componentClass:E?.data?.staticClass,parentTag:E?.parent?.tag,parentClass:E?.parent?.data?.staticClass,prevEl:E?.elm?.nodeName,innerHTML:E?.elm?.innerHTML,parentInnerHtml:E?.parent?.elm?.innerHTML,recentMutations:se,experimentsAssignments:Ct,partnerId:oe.context?.eventDataSource?.partnerId}})}}}}}}catch(r){ue.error("Global catch on client entry",{error:{message:r.message,stack:r.stack},initialContext:b,location:Me.location})}return null};class Qs{constructor(t,o){R(this,"sdk");this.sdk=t,this.registerMethodsInStoreForGlobalUse(o)}registerMethodsInStoreForGlobalUse(t){t.state[Ze]||t.registerModule(Ze,{namespaced:!0,state:{isExperimentActive:this._isExperimentActive.bind(this),getExperimentVariation:this._getExperimentVariation.bind(this),isExperimentActiveAsync:this._isExperimentActiveAsync.bind(this),getExperimentVariationAsync:this._getExperimentVariationAsync.bind(this),isFeatureToggleActive:this._isFeatureToggleActive.bind(this)}})}_getExperimentVariation(t,o){try{fe(t,o)}catch(r){return S.error(r),"A"}if(!t?.context||t.context.length)throw new Error("Experiment: missing updated context state");if(!o)throw new Error('Experiment: missing required param: "key"');return this.sdk.get(o)}_isFeatureToggleActive(t,o){try{fe(t,o)}catch(r){return S.error(r),!1}if(!t?.context||t.context.length)throw new Error("Experiment: missing updated context state");if(!o)throw new Error('Feature Toggle missing required param: "key"');return this.sdk.check(o)}_isExperimentActive(t,o,r){try{fe(t,o)}catch(n){return S.error(n),!1}if(!t?.context||t.context.length)throw new Error("Experiment: missing updated context state");if(!o)throw new Error('Experiment: missing required param: "key"');return this.sdk.get(o)?.toLowerCase()===r?.toLowerCase()}async _isExperimentActiveAsync(t,o,r,a){try{fe(t,o)}catch(s){return S.error(s),!1}return(await this._getExperimentVariationAsync(t,o,a))?.toLowerCase()===r?.toLowerCase()}_getExperimentVariationAsync(t,o,r){const a=r||t.context;try{fe(t,o)}catch(n){return S.error(n),new Promise(s=>s("A"))}if(!a||a.length)throw new Error("Experiment: missing updated context state");if(!o)throw new Error('Experiment: missing required param: "key"');return this.sdk.getAsync(o,a)}}const Lt=z({name:"Experiment",props:{name:{default:"",required:!0,type:String},variant:{default:qe,required:!0,type:String}},render(){const e=this.$isExperimentActive(this.$store.state,this.name,this.variant),t=this.$slots.default?.()??[];return e?t:[]}}),Ot=z({name:"FeatureToggle",props:{name:{default:"",required:!0,type:String},inverse:{default:!1,required:!1,type:Boolean}},render(){const e=this.$isFeatureToggleActive(this.$store.state,this.name),t=this.inverse?!e:e,o=this.$slots.default?.()??[];return t?o:[]}}),Js={install(e,t){e.component(Lt.name,Lt),e.component(Ot.name,Ot),e.config.globalProperties.$isExperimentActive=function(o,r,a=qe){return t.experimentation._isExperimentActive(o,r,a)},e.config.globalProperties.$isExperimentActiveAsync=function(o,r,a=qe,n){return t.experimentation._isExperimentActiveAsync(o,r,a,n)},e.config.globalProperties.$isFeatureToggleActive=function(o,r){return t.experimentation._isFeatureToggleActive(o,r)},e.config.globalProperties.$getExperimentVariation=function(o,r){return t.experimentation._getExperimentVariation(o,r)},e.config.globalProperties.$getExperimentVariationAsync=function(o,r,a){return t.experimentation._getExperimentVariationAsync(o,r,a)}}},js={install(e,t){const o=function(n,s){return t.gettext._t(n,s)};e.config.globalProperties.$t=o;const r=function(n,s,i){const c=`${n}_plurals_${yr(s,t.gettext.locale)}`;return t.gettext._t(c,i)};e.config.globalProperties.$tp=r,e.provide("$t",o)}},ei={install(e,t){e.config.globalProperties.$analyticsLogger=t.logger,e.provide("$analyticsLogger",t.logger)}},ti={install(e,t){e.config.globalProperties.$eventLogger=t.eventLogger,e.provide("$eventLogger",t.eventLogger)}},oi={install(e,t){const o=function(r){const a=t.store.getters["context/localePath"];return De(a,r)};e.config.globalProperties.$gyglink=o}};function ri(){const e=kt();return tt(()=>{const o=e.getters["context/locales"].filter(r=>r.enabled).map(r=>r.iso.toLowerCase()).flatMap(r=>[r.substring(0,2),r]);return new Set(o)})}function ai(e){const t=ri();return tt(()=>Object.entries(e).filter(([o])=>t.value.has(o.toLowerCase())).map(([o,r])=>({rel:"alternate",hreflang:o,href:cr(o,r)})))}const Xt=z({name:"TFEHead",props:{metaInfo:{type:Object,default:()=>({})},mode:{type:String,default:"server"}},setup(e){const t=kt(),o=tt(()=>t.getters["context/locale"]),r=ai(e.metaInfo.alternateUrls??{}),{title:a,description:n,noIndex:s,canonicalUrl:i,socialImage:c,htmlAttrs:u,bodyAttrs:l,style:p,script:g,noscript:m,meta:E=[],link:y=[]}=e.metaInfo,w=[],f=[];s&&w.push({name:"robots",content:"noindex"},{name:"AdsBot-Google",content:"noindex"}),o.value&&w.push({property:"og:locale",content:o.value}),a&&w.push({property:"og:title",content:ir(a)}),n&&w.push({vmid:"description",name:"description",content:n},{vmid:"og-description",property:"og:description",content:n}),c?.url&&c.height&&c.width&&w.push({property:"og:image",content:c.url},{property:"og:image:height",content:String(c.height)},{property:"og:image:width",content:String(c.width)}),i&&(f.push({rel:"canonical",href:i}),w.push({property:"og:url",content:i})),f.push(...r.value,...y),w.push(...E);const C=f.map(({earlyHint:v,...B})=>B);return to({title:a,link:C,meta:w,htmlAttrs:u,bodyAttrs:l,style:p,script:g,noscript:m},{mode:e.mode}),()=>{}}}),ni=z({name:"GTMBase",components:{TFEHead:Xt},computed:{...oo({googleTagManagerId:e=>e.googleTagManagerId,trackingData:function(e){const t=e,{customUtm:o}=t.context;return{...t.trackingData,isMobile:t.context?.isMobileDevice,currency:t.context?.currency,country:t.context?.geoIpData?.country,containerName:ot(this.$route),customerId:t.auth?.customer?.id||null,visitorId:t.context?.visitorId,dateFrom:"",dateTo:"",platform:"traveler-frontend",customUtm:o.length?o:null}}}),metaInfo(){const{googleTagManagerId:e,trackingData:t}=this,o=[],r=[],a=lr(t);a&&r.push({vmid:"dataLayer",nonce:this.$store?.state?.context?.cspNonce,innerHTML:a});const n={innerHTML:`(function(){


          window['dataLayer'] = window['dataLayer'] || [];
          window['dataLayer'].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
          });

          var firstScript = document.getElementsByTagName("script")[0];
          var nonce = document.querySelector("[nonce]");
          var gtmScript = document.createElement("script");
          gtmScript.async = true;
          gtmScript.src = 'https://optics.getyourguide.com/gtm.js?id='+'${e}';

          var fallbackScript = document.createElement("script");
          fallbackScript.async = true;
          fallbackScript.src = 'https://googletagmanager.com/gtm.js?id='+'${e}';


          if (nonce) {
            gtmScript.setAttribute("nonce", nonce.nonce || nonce.getAttribute("nonce"));
            fallbackScript.setAttribute("nonce", nonce.nonce || nonce.getAttribute("nonce"));
          }

          gtmScript.onerror = function () {
            firstScript.parentNode.insertBefore(fallbackScript, firstScript);
          }

          firstScript.parentNode.insertBefore(gtmScript, firstScript);
        })();`,innerHTMLOriginal:`(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                    'https://optics.getyourguide.com/gtm.js?id='+i+dl;var n=d.querySelector('[nonce]');
                    n&&j.setAttribute('nonce',n.nonce||n.getAttribute('nonce'));f.parentNode.insertBefore(j,f);
                    })(window,document,'script','dataLayer','${e}');`,innerNoScriptHTML:`<iframe src="https://optics.getyourguide.com/ns.html?id=${e}" height="0" width="0" style="display:none;visibility:hidden"></iframe>`};return e&&r.push({vmid:"gtm",id:"gtmScript",nonce:this.$store?.state?.context?.cspNonce,innerHTML:n.innerHTML}),e&&o.push({vmid:"gtmnoscript",innerHTML:n.innerNoScriptHTML}),{script:r,noscript:o}}},mounted(){this.trackingData.country==="IT"&&ur({mtpRMKTExperimentVariation:dr(this.$store.state,pr)})}});function si(e,t,o,r,a,n){const s=Oe("TFEHead");return _e(),ro(s,{"meta-info":e.metaInfo},null,8,["meta-info"])}const ii=Ue(ni,[["render",si]]),ci=z({name:"BaseClient",components:{TFEHead:Xt,GTMBase:ii},data(){const e=this.$t("pIndex Title");return{defaultDescription:this.$t("pIndex meta description"),defaultTitle:e,hasInitialMetaInfo:!1}},computed:{...ao({assetsCdnUrl:"context/assetsCdnUrl",currentUrl:"context/currentUrl"}),metaInfo(){const{defaultDescription:e,defaultTitle:t}=this,o=this.currentUrl?new URL(this.currentUrl):null,r=[],a=[{property:"og:type",content:"website"},{property:"og:site_name",content:"GetYourGuide"}],n=[];return n.push({vmid:"pageSchema",type:"application/ld+json",innerHTML:{"@context":"http://schema.org","@type":"Organization",name:"GetYourGuide",url:o?.origin??"",logo:`${this.assetsCdnUrl}/assets/static/logos/gyg-logo.svg`,sameAs:["https://www.facebook.com/GetYourGuide","https://instagram.com/getyourguide/","https://twitter.com/GetYourGuide","https://www.linkedin.com/company/getyourguide-ag/"]}}),{title:t,description:e,meta:a,link:r,script:n}}},mounted(){this.$data.hasInitialMetaInfo=!0}});function li(e,t,o,r,a,n){const s=Oe("TFEHead"),i=Oe("GTMBase"),c=Oe("router-view");return _e(),Ie("div",null,[Ge(s,{"meta-info":e.metaInfo},null,8,["meta-info"]),Ge(i),Ge(c)])}const ui=Ue(ci,[["render",li]]),di=["QuotaExceededError","Access is denied","Acceso denegado.","Accesso negato.","Zugriff verweigert","Cannot read property 'getItem' of null","window.localStorage is null","null is not an object (evaluating 'window.localStorage.getItem')","The operation is insecure","SecurityError: DOM Exception 18","NotSupportedError: DOM Exception 9"],pi=["NS_ERROR_FILE_CORRUPTED","NS_ERROR_FILE_NO_DEVICE_SPACE","NS_ERROR_FAILURE","NS_ERROR_STORAGE_IOERR","NS_ERROR_FILE_READ_ONLY","NS_ERROR_FILE_ACCESS_DENIED"],Dt=["displayName","firstName","fullName","lastName","users","email","jwt"],mi="[REDACTED]";function gi(e){try{const t="__gyg_random_key_we_ll_never_use__";e().setItem(t,t),e().removeItem(t)}catch{return!1}return!0}const wi=e=>di.some(t=>e.indexOf(t)>=0)||!gi(()=>localStorage),fi=e=>pi.some(t=>e.indexOf(t)>=0),st=e=>e&&e.exception&&e.exception.values,Ei=e=>e&&typeof e=="string",hi=e=>zt(e.originalException),Ti=e=>{if(st(e)){const t=e&&e.exception&&e.exception.values||[];for(const o of t){const r=o.value;if(r&&Ei(r)&&wi(r))return!0;const a=o.type;if(a&&typeof a=="string"&&fi(a))return!0}}return!1},_i=e=>{const t=e&&e.originalException;return!!(t&&t.isAxiosError&&t.response&&t.response.status>=400)},Ii=e=>(e&&e.culprit)==="socketOnEnd(_http_server)",Si=e=>bt(e,"otBannerSdk")||bt(e,"static/onetrust-"),bt=(e,t)=>{if(st(e)){const o=e.exception?.values;return o?o.some(r=>r?.stacktrace?.frames?.some(a=>a?.filename?.includes(t))):!1}return!1},Nt=(e,t)=>{if(st(e)&&e.exception?.values?.length)for(const o of e.exception.values){const r=o?.stacktrace?.frames?.find(a=>a?.filename?.includes(t));if(r?.filename)return r.filename}return""},Zt=/^Hydration\b.+?\bmismatch\b/,Ai=e=>{const t=["Error","SyntaxError","TypeError","CustomEvent"],o=Zt.test(e.exception?.values?.[0]?.value??"")?"":e.exception?.values?.[0]?.type??"",r=e.exception?.values?.[0]?.stacktrace?.frames?.[0]?.function;return!!(t.includes(o)&&!r)},yi=e=>{const t=Nt(e,"chrome-extension://"),o=Nt(e,"moz-extension://");return t||o?(U.increment("browser_extension_error",{filename:t||o}),!0):!1},Ri=(e,t)=>yi(e)||Ai(e)||Ti(e)||t&&hi(t)||t&&_i(t)||Ii(e)||Si(e),vi=e=>e.exception?.values?.some(t=>t.value==="Number.prototype.toString requires that 'this' be a Number"),Ci=e=>e.exception?.values?.some(t=>t.value==="n.setAttribute is not a function"||t.value===`n.setAttribute is not a function. (In 'n.setAttribute("class",s)', 'n.setAttribute' is undefined)`),Li=e=>{Ci(e)&&(e.fingerprint=["n-set-attribute"]),vi(e)&&(e.fingerprint=["vue-prop-number-tostring","{{stack.function}}"])},Oi=(e,t)=>{if(!e.message)return;let o=e.message;const r=t?.event?.target;e.category==="ui.click"&&e.message.toLowerCase()===r?.tagName?.toLowerCase()&&(o+=`
Inner HTML: ${xe(r.innerHTML)}`,o+=`
Shadow Root Inner HTML: ${xe(r?.shadowRoot?.innerHTML??"")}`),e.message=o},Di=(e,t)=>{if(e.data)try{const o=e.data;if(e.category==="xhr"){const r=t?.xhr?.__sentry_xhr__?.body;r&&(ke(r),o.body=xe(JSON.stringify(r)));const a=t?.xhr?.responseText;if(a){const n=JSON.parse(a);ke(n),o.response=xe(JSON.stringify(n))}}e.data=o}catch{}},ke=(e,t=!1)=>{if(typeof e=="object"){Array.isArray(e)&&e.forEach(o=>ke(o));for(const[o,r]of Object.entries(e))typeof r=="object"&&ke(r,Dt.includes(o)),(t||Dt.includes(o)&&typeof r=="string")&&(e[o]=mi)}},xe=(e,t=300)=>e?.substring(0,t)??"",bi={allowUrls:[/^https:\/\/(?:www\.)?getyourguide\./,/testing[0-9]{1,2}\.gygtest\./],ignoreErrors:["[gyg-icon-init] Error fetching sprite","Loading chunk","Loading CSS chunk","Network Error","NetworkError","Request aborted","A network error (such as timeout, interrupted connection or unreachable host) has occurred.","TimeoutError: The operation timed out.","Can't find variable: Promise","Promise is not defined","Extension context invalidated.",`null is not an object (evaluating 'document.head.querySelector("meta[name='supported-color-schemes']").content')`,"Can't find variable: pktAnnotationHighlighter","An internal error occurred in the Microsoft Internet extensions","In den Microsoft-Interneterweiterungen ist ein interner Fehler aufgetreten.","null is not an object (evaluating 'document.getElementById('web').innerHTML = 'All'')","null is not an object (evaluating 'document.getElementById('images').innerHTML = 'Images'')","null is not an object (evaluating 'document.getElementById('news').innerHTML = 'News'')","null is not an object (evaluating 'document.getElementById('map').innerHTML = 'Maps'')","a[b].target.className.indexOf","Cannot read property 'consentDefaulCall' of undefined","ResizeObserver loop limit exceeded","SecurityError: Failed to read the 'cssRules' property from 'CSSStyleSheet': Cannot access rules","null is not an object (evaluating 'w.cssRules.length')","Avoided redundant navigation to current location","Can't find variable: _AutofillCallbackHandler","Non-Error promise rejection captured with keys","SecurityError: Blocked a frame with origin",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"redeclaration of let s","Can't find variable: instantSearchSDKJSBridgeClearHighlight","undefined is not an object (evaluating 'document.getElementsByTagName('video')[0].webkitExitFullScreen')","Can't find variable: setIOSParameters","undefined is not an object (evaluating 'ceCurrentVideo.currentTime')","AbortError: User closed the Payment Request UI.","Unable to load script https://pay.google.com/gp/p/js/pay.js","The object does not support the operation or argument.","Non-Error promise rejection captured with value: Timeout","ConnectionError: Connection is offline","At least one supported network must be provided.","SecurityError replaceState([native code])","Failed to execute 'replaceState' on 'History'","InternalServerError serverSideAnalytics(analytics-middleware-server.ts)","stream is not readable"],beforeSend(e,t){return Ri(e,t)?null:(Li(e),e)},beforeBreadcrumb(e,t){return t&&(Oi(e,t),Di(e,t)),e}};function Ni(e){return/\d+:\d+.*(PM|AM)/.test(e)&&/text.*mismatch/.test(e)}function Pi({app:e,router:t,store:o}){const r=o.state.context?.isDevelopment,a=/^.*?\.testing20\.gygtest\..+$/.test(window.location.hostname);if(window.sentryBrowserDsn){Or({...bi,...r&&{allowUrls:void 0},app:e,dsn:window.sentryBrowserDsn,environment:window.sentryEnvironment,release:"traveler-frontend@"+window.releaseTag,logErrors:!0,attachProps:!0,debug:r||a}),r&&(e.config.warnHandler=(i,c,u)=>{if(Zt.test(i)&&!Ni(i)){const l=(i+u).replace('"at','" at');console.error(`[TFE] Vue hydration mismatch encountered

`,l),o.dispatch("notifications/setMessage","```\n"+l+"\n```\n\nDetails in console.")}else console.warn("[TFE]",i+u)});const n=window.__INITIAL_STATE__.context,s=window.__INITIAL_STATE__.auth;t.onError(i=>{Dr(c=>{c.setTag("error_type","routerError"),Ft(i)})}),t.afterEach(i=>{br(c=>{c.setTag("container_name",ot(i)),n?.visitorId&&c.setTag("visitor_id",n?.visitorId),s?.isLoggedIn&&c.setTag("is_logged_in",!0);const u=n?.shoppingCartMeta?.shoppingCartHash?n.shoppingCartMeta.shoppingCartHash.substring(0,8):null;u&&c.setTag("shopping_cart_hash",`${u}%`)})})}else ue.warn("[TRAVELER-FRONTEND] Browser Sentry not initialized. Missing DSN. See the README for more info.")}const ki=()=>({_eventHandlers:{},on(e,t){return this._eventHandlers[e]?.push(t)??(this._eventHandlers[e]=[t]),()=>{const o=this._eventHandlers[e]?.indexOf(t)??-1;o>-1&&this._eventHandlers[e]?.splice(o,1)}},emit(e,...t){this._eventHandlers[e]?.forEach(o=>o(...t))}}),xi=()=>typeof window=="object",Ui=z({name:"LazyHydrate",props:{ssrOnly:Boolean,whenIdle:Boolean,whenVisible:[Boolean,Object],didHydrate:Function,promise:Object,on:[Array,String]},setup(e){const t=!e.ssrOnly&&!e.whenIdle&&!e.whenVisible&&!e.on?.length&&!e.promise,o=ze(null),r=ze(t||!xi()),a=()=>{r.value=!0};return xt(()=>{o.value&&!o.value.hasChildNodes()&&a()}),it(r,n=>{n&&e.didHydrate&&e.didHydrate()},{immediate:!0}),it([()=>e,o,r],([{on:n,promise:s,ssrOnly:i,whenIdle:c,whenVisible:u},l,p],g,m)=>{if(i||p)return;const E=[],y=()=>{E.forEach(w=>{w()})};if(s&&s.then(a,a),u)if(l&&typeof IntersectionObserver<"u"){const w=typeof u=="object"?u:{rootMargin:"250px"},f=new IntersectionObserver(C=>{C.forEach(v=>{(v.isIntersecting||v.intersectionRatio>0)&&a()})},w);f.observe(l),E.push(()=>{f.disconnect()})}else return a();if(c)if(typeof window.requestIdleCallback<"u"){const w=window.requestIdleCallback(a,{timeout:500});E.push(()=>{window.cancelIdleCallback(w)})}else{const w=setTimeout(a,2e3);E.push(()=>{window.clearTimeout(w)})}n&&[].concat(n).forEach(f=>{l?.addEventListener(f,a,{once:!0,passive:!0}),E.push(()=>{l?.removeEventListener(f,a,{})})}),m(y)},{immediate:!0}),{wrapper:o,hydrated:r}}}),Mi={key:0,ref:"wrapper",style:{display:"contents"}},Fi={key:1,ref:"wrapper"};function Hi(e,t,o,r,a,n){return e.hydrated?(_e(),Ie("div",Mi,[Ut(e.$slots,"default")],512)):(_e(),Ie("div",Fi,null,512))}const Gi=Ue(Ui,[["render",Hi]]),Bi=z({name:"ClientOnly",props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(e,{slots:t}){const o=ze(!1);return xt(()=>{o.value=!0}),r=>{if(o.value)return t.default?.();const a=t.fallback||t.placeholder;if(a)return a();const n=r.fallback??r.placeholder??"",s=r.fallbackTag??r.placeholderTag??"span";return Ie(s,null,n)}}}),Vi=/^\/(magazine|travel-guides)(\/.*)?$/,$i=/^\/[a-z]{2}-[a-z]{2}(\/.*)?$/i,Wi=new RegExp(/^(http|https):\/\/(www\.)?getyourguide\.(com|co\.uk|dk|de|at|ch|es|com\.tw|com\.mx|fi|fr|it|jp|co\.kr|nl|no|pl|com\.br|pt|ru|se|com\.tr)(\/.*)?$/);function Yi(e){if(!e)return;const t=e.replace(Wi,"$4");return Vi.test(t)||$i.test(t)?t:t.startsWith("/")?t.substring(1):t}const Ki=z({name:"Link",props:{href:{type:String,required:!1,default:void 0}},computed:{url(){return Yi(this.href)},listeners(){return"$listeners"in this?this.$listeners:{}}}}),zi=["href"];function Xi(e,t,o,r,a,n){return _e(),Ie("a",no({href:e.url},so(e.listeners,!0)),[Ut(e.$slots,"default")],16,zi)}const Zi=Ue(Ki,[["render",Xi]]),Te=Symbol.for("v-click-outside-handlers");if(typeof window=="object"){window[Te]=window[Te]??new Map;const e=window[Te];e.initialized||(window.document.addEventListener("click",t=>{e.forEach(o=>{o(t)})},{capture:!0,passive:!0}),window.document.addEventListener("touchstart",t=>{e.forEach(o=>{o(t)})},{capture:!0,passive:!0}),e.initialized=!0)}const Pt=(e,{value:t})=>{window[Te].set(e,r=>{r.target!==e&&!e.contains(r.target)&&typeof t=="function"&&t()})},qi=e=>{window[Te].delete(e)},Qi={mounted:Pt,updated:Pt,beforeUnmount:qi};async function Ji(e,t){if(!t)return{};const{router:o,store:r,httpClient:a,experimentationSDK:n,locale:s,gettexts:i,isPciCompliantRoute:c}=t,u=c?(await D(()=>import("./base-pci-client-06aeab3d.js"),["assets/base-pci-client-06aeab3d.js","assets/vendors-vue-framework-13104596.js","assets/vendors-59c98b73.js","assets/getyourguide-framework-9ee7e61a.js","assets/vendors-framework-155f2588.js","assets/locales.en-1fc747e9.js","assets/getyourguide-compass-3bc10143.js","assets/getyourguide-compass-fddf2ecc.css","assets/commons-store-f390809e.js","assets/braze-89d377b3.js","assets/vendors-sentry-d2dc44b0.js","assets/base-pci-client-a4cff2f3.css"])).default:ui,l=io(u),p=o.instance,g=co();l.use(p),l.use(r),l.use(g),l.use(lo),l.provide("rootEmitter",ki()),l.component("ClientOnly",Bi),l.component("LazyHydrate",Gi),l.component("Link",Zi),l.component("FlatPickr",uo),l.directive("ClickOutside",Qi);const m=new Rr({locale:s.current,defaultLocale:s.default,gettexts:i.current,defaultGettexts:i.default,debugGettextKeys:i.debug});l.use(js,{gettext:m}),l.use(oi,{store:r});const{analyticsLoggers:E,perfMonitor:y}=await new Promise((v,B)=>{const Fe=o.createHandlers({ctx:{loadGettexts:m.loadGettexts.bind(m)},resolve:v,reject:B});p.isReady().then(Fe.onReady,B);const He=a.createHandlers({ctx:{appRootEmit:()=>{}}});a.instance.setConnectionErrorHandler(He.onConnectionError)});l.use(ei,{logger:E});const w=new vr,f=new Cr(r.state.context.eventDataSource);w.registerLogger(new Lr(f)),l.use(ti,{eventLogger:w});const C=new Qs(n,r);return l.use(Js,{experimentation:C}),Pi({app:l,router:p,store:r}),l.mount("#gyg"),y.setMark("frameworkComplete"),l}async function ji(){const e=await qs(hs,Rs,_s());return Ji("Locations",e)}ji().catch(e=>ue.error(e));export{aa as A,hc as E,Ne as H,Gi as L,Ee as M,$t as P,x as R,ne as S,Xt as _,fc as a,Re as b,qr as c,L as d,dc as e,ht as f,wc as g,gc as h,Vs as i,pc as j,mc as k,Ec as l,uc as m,Qr as s};
//# sourceMappingURL=index-fbaddd27.js.map
